<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>claude-codeåŸºç¡€æ¶æ„ | æˆ‘çš„åšå®¢</title><meta name="author" content="å¯’éœœ"><meta name="copyright" content="å¯’éœœ"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="claude-codeåŸºç¡€æ¶æ„"><meta name="application-name" content="claude-codeåŸºç¡€æ¶æ„"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="claude-codeåŸºç¡€æ¶æ„"><meta property="og:url" content="https://hanshuang-ai.github.io/2025/10/23/claude-code-ji-chu-jia-gou/index.html"><meta property="og:site_name" content="æˆ‘çš„åšå®¢"><meta property="og:description" content="å‚è€ƒé“¾æ¥ Dependencies: The Foundation of Claude Codeâ€™s Architectureä¾èµ–ï¼šClaude Codeæ¶æ„çš„åŸºç¡€  *\* Indicates likely custom&amp;#x2F;embedded implementation based on decom"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="å¯’éœœ"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="å‚è€ƒé“¾æ¥ Dependencies: The Foundation of Claude Codeâ€™s Architectureä¾èµ–ï¼šClaude Codeæ¶æ„çš„åŸºç¡€  *\* Indicates likely custom&amp;#x2F;embedded implementation based on decom"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://hanshuang-ai.github.io/2025/10/23/claude-code-ji-chu-jia-gou/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@6.1.6/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ï¾ŸĞ”ï¾Ÿ)w ä¸è¦èµ°ï¼å†çœ‹çœ‹å˜›ï¼","backTitle":"â™ª(^âˆ‡^*)æ¬¢è¿è‚¥æ¥ï¼"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€","rightMenuMsgToTraditionalChinese":"è½¬ä¸ºç¹ä½“","rightMenuMsgToSimplifiedChinese":"è½¬ä¸ºç®€ä½“"},
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.2.0/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.2.0/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'æˆ‘çš„åšå®¢',
  title: 'claude-codeåŸºç¡€æ¶æ„',
  postAI: '',
  pageFillDescription: 'Dependencies The Foundation of Claude Codeâ€™s Architecture, ä¾èµ–ï¼šClaude Codeæ¶æ„çš„åŸºç¡€, The Unconventional Choices That Define Performance, å®šä¹‰æ€§èƒ½çš„éä¼ ç»Ÿé€‰æ‹©, ğŸ” The React-in-Terminal Architecture, ğŸ” ç»ˆç«¯ä¸­çš„Reactæ¶æ„, ğŸ” The Streaming Parser Architecture, ğŸ” æµå¼è§£æå™¨æ¶æ„, ğŸ” The Multi-Platform LLM Abstraction Layer, ğŸ” å¤šå¹³å°LLMæŠ½è±¡å±‚, ğŸ” The Telemetry Triple-Stack, ğŸ” é¥æµ‹ä¸‰é‡æ ˆ, ğŸ” Data Transformation Pipeline, ğŸ” æ•°æ®è½¬æ¢ç®¡é“, ğŸ” The MCP Transport Layer, ğŸ” MCPä¼ è¾“å±‚, Dependency Categories Deep Dive, ä¾èµ–ç±»åˆ«æ·±åº¦å‰–æ, Core CLI Framework (15+ packages), æ ¸å¿ƒCLIæ¡†æ¶ï¼ˆ15+ä¸ªåŒ…ï¼‰, LLM Integration Stack (5+ packages), LLMé›†æˆå †æ ˆï¼ˆ5+ä¸ªåŒ…ï¼‰, Data Processing amp Validation (8+ packages), æ•°æ®å¤„ç†ä¸éªŒè¯ï¼ˆ8+ä¸ªåŒ…ï¼‰, File System Intelligence (6+ packages), æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½ï¼ˆ6+ä¸ªåŒ…ï¼‰, Telemetry amp Observability (4+ packages), é¥æµ‹ä¸å¯è§‚å¯Ÿæ€§ï¼ˆ4+ä¸ªåŒ…ï¼‰, Hidden Gems The Specialized Dependencies, éšè—çš„å®çŸ³ï¼šä¸“ä¸šåŒ–ä¾èµ–é¡¹, XML Parsing for LLM Communication, ç”¨äºLLMé€šä¿¡çš„XMLè§£æ, The plist Parser Mystery, plistè§£æå™¨ä¹‹è°œ, Cross-Platform Process Spawning, è·¨å¹³å°è¿›ç¨‹ç”Ÿæˆ, Dependency Security Considerations, ä¾èµ–é¡¹å®‰å…¨è€ƒè™‘, Performance Implications of Dependency Choices, ä¾èµ–é¡¹é€‰æ‹©çš„æ€§èƒ½å½±å“, Memory Management Strategy, å†…å­˜ç®¡ç†ç­–ç•¥, Startup Time Optimization, å¯åŠ¨æ—¶é—´ä¼˜åŒ–, æ–‡ä»¶æ€»ç»“, æ¦‚è¿°, æ ¸å¿ƒæ¶æ„ç‰¹ç‚¹, 1. ç»ˆç«¯Reactæ¶æ„, 2. æµå¼è§£æå™¨æ¶æ„, 3. å¤šå¹³å°LLMæŠ½è±¡å±‚, 4. é¥æµ‹ä¸‰é‡æ ˆ, æŠ€æœ¯äº®ç‚¹, æ€§èƒ½ä¼˜åŒ–ç­–ç•¥, å®‰å…¨è€ƒè™‘, æ•°æ®å¤„ç†ç®¡é“, ä¸“ä¸šåŒ–ä¾èµ–é¡¹, éšè—çš„å®çŸ³, æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½, æ¶æ„æ´å¯Ÿ, è®¾è®¡åŸåˆ™, å®ç°æ¨¡å¼, æŠ€æœ¯ä»·å€¼, åˆ›æ–°ç‚¹, å·¥ç¨‹å®è·µ, ç»“è®ºå‚è€ƒé“¾æ¥ä¾èµ–æ¶æ„çš„åŸºç¡€è¡¨ç¤ºåŸºäºåç¼–è¯‘åˆ†æå¯èƒ½çš„è‡ªå®šä¹‰åµŒå…¥å¼å®ç°å®šä¹‰æ€§èƒ½çš„éä¼ ç»Ÿé€‰æ‹©çš„ä¾èµ–æ¶æ„æ­ç¤ºäº†å‡ ä¸ªå¼•äººå…¥èƒœçš„å®ç°å†³ç­–è¿™äº›å†³ç­–ç›´æ¥è´¡çŒ®äº†å…¶è‘—åçš„æ€§èƒ½å’Œå¯é æ€§è®©æˆ‘ä»¬å…ˆæ¢ç´¢æŠ€æœ¯ä¸Šæœ€æœ‰è¶£çš„æ–¹é¢ç»ˆç«¯ä¸­çš„æ¶æ„æ ¸å¿ƒæ¸²æŸ“ç®¡é“ä¼¼ä¹å®ç°äº†å®Œæ•´çš„åè°ƒå™¨ç»ˆç«¯æ¸²æŸ“å™¨å¸ƒå±€å¼•æ“ä¸ºä½•é‡è¦ä¸ä¼ ç»Ÿå‘½ä»¤å¼ç®¡ç†çŠ¶æ€çš„å·¥å…·ä¸åŒåˆ©ç”¨çš„åè°ƒç®—æ³•æ¥å¤„ç†ç»ˆç«¯è¿™æ„å‘³ç€ç»ˆç«¯ä¸­çš„è™šæ‹Ÿæ¯æ¬¡æ›´æ–°éƒ½è¦ç»è¿‡çš„å·®å¼‚ç®—æ³•ç„¶åè®¡ç®—æœ€ä½³çš„ç»ˆç«¯å­—ç¬¦ä½ç½®å£°æ˜å¼çŠ¶æ€å¤æ‚çš„çŠ¶æ€æƒé™å¯¹è¯æ¡†è¿›åº¦æŒ‡ç¤ºå™¨å¹¶å‘å·¥å…·æ‰§è¡Œéƒ½ä»¥å£°æ˜æ–¹å¼ç®¡ç†æ€§èƒ½æ¨¡å—ä¸ºå¤æ‚æä¾›äºšæ¯«ç§’çº§çš„å¸ƒå±€è®¡ç®—å®ç°æ´å¯Ÿä¾èµ–è¡¨æ˜é¢„ç¼–è¯‘å¸ƒå±€çº¦æŸåœ¨å¿«é€Ÿæ›´æ–°æœŸé—´å¦‚æµå¼å“åº”ç”¨å†…å­˜æ¢å–é€Ÿåº¦æµå¼è§£æå™¨æ¶æ„åŸºäºåç¼–è¯‘åˆ†æä¼¼ä¹åµŒå…¥äº†å…³é”®è§£æå™¨çš„è‡ªå®šä¹‰å®ç°ä»ä¾èµ–åˆ†ææ¨æ–­çš„è§£æå™¨åŠŸèƒ½é€šè¿‡å“¨å…µå­—ç¬¦ä¸²åµŒå…¥å¯¹è±¡é€’å½’å‘½ä»¤æ›¿æ¢ä¿æŒç±»å‹çš„ç¯å¢ƒå˜é‡å±•å¼€å•æ¬¡éå†æ ‡è®°åŒ–æ€§èƒ½å·¥å…·è°ƒç”¨çš„æµå¼è§£æéƒ¨åˆ†æ–‡æ¡£æ¢å¤è¾“å‡ºçš„è‡ªå®šä¹‰å®ä½“å¤„ç†æ— è®ºæ–‡æ¡£å¤§å°å¦‚ä½•éƒ½ä½¿ç”¨æ’å®šå†…å­˜è§£æå™¨çš„ç§˜å¯†æ­¦å™¨åŸºäºåˆ†æçš„æ¦‚å¿µå®ç°é˜¶æ®µå¯¹è±¡åºåˆ—åŒ–é˜¶æ®µä¿ç•™å“¨å…µçš„æ ‡å‡†è§£æé˜¶æ®µå¯¹è±¡é‡æ–°æ°´åŒ–è¿™ä½¿å¾—èƒ½å¤Ÿé€šè¿‡å‘½ä»¤ä¼ é€’å¤æ‚çš„é…ç½®å¯¹è±¡è¿™æ˜¯æ ‡å‡†è§£æå™¨ä¸­æ‰¾ä¸åˆ°çš„åŠŸèƒ½å¤šå¹³å°æŠ½è±¡å±‚ä¾èµ–ç»“æ„æ­ç¤ºäº†ä¸€ä¸ªå¤æ‚çš„å¤šä¾›åº”å•†æ–¹æ³•å¹³å°ä¸»è¦æµå¼ä¼ è¾“ä¸“ç”¨åŠŸèƒ½åŸç”Ÿå®Œæ•´æ€ç»´å—ç¼“å­˜æ§åˆ¶è‡ªå®šä¹‰é€‚é…å™¨è·¨åŒºåŸŸæ•…éšœè½¬ç§»è®¤è¯è‡ªå®šä¹‰é€šè¿‡é€‚é…å™¨è‡ªåŠ¨ä»¤ç‰Œåˆ·æ–°å®ç°æ¨¡å¼ä»ä¾èµ–é¡¹æ¨æ–­çš„å·¥å‚æ¨¡å¼é¥æµ‹ä¸‰é‡æ ˆä½¿ç”¨ä¸‰ä¸ªäº’è¡¥ç³»ç»Ÿå®ç°äº†å…¨é¢çš„å¯è§‚å¯Ÿæ€§ç­–ç•¥é”™è¯¯è¿½è¸ªæŒ‡æ ‡ç›‘æ§åŠŸèƒ½æ ‡å¿—æ£€æµ‹è‡ªå®šä¹‰æµ‹è¯•é”™è¯¯è¾¹ç•Œè®¡æ•°å™¨æ¸è¿›å¼å‘å¸ƒæ€§èƒ½åˆ†æå»¶è¿Ÿç›´æ–¹å›¾åŠ¨æ€é…ç½®è°ƒè¯•ä¼˜åŒ–å®éªŒæ£€æµ‹åˆ›æ–°ä»é›†æˆæ¨¡å¼æ¨æ–­åº”ç”¨ç¨‹åºæ— å“åº”æ£€æµ‹ç”Ÿæˆä¸€ä¸ªæœŸæœ›å¿ƒè·³çš„çº¿ç¨‹é€šè¿‡æ£€æŸ¥å™¨åè®®è·å–ä¸»çº¿ç¨‹å‘é€å¿ƒè·³è¿™ä½¿å¾—èƒ½å¤Ÿæ£€æµ‹å’ŒæŠ¥å‘Šä¸»äº‹ä»¶å¾ªç¯è¢«é˜»å¡çš„æƒ…å†µå¯¹äºè¯†åˆ«ç”Ÿäº§ç¯å¢ƒä¸­çš„æ€§èƒ½é—®é¢˜è‡³å…³é‡è¦æ•°æ®è½¬æ¢ç®¡é“æ•°æ®å¤„ç†ä¾èµ–é¡¹å½¢æˆäº†ä¸€ä¸ªå¤æ‚çš„ç®¡é“è¾“å…¥ç”¨æˆ·æ–‡æœ¬ç½‘é¡µå†…å®¹å›¾åƒæ•°æ®è½¬æ¢éªŒè¯è§£æå™¨å›¾åƒå¤„ç†å™¨è¾“å‡ºç±»å‹å®‰å…¨æ•°æ®æ–‡æœ¬è°ƒæ•´å¤§å°å‹ç¼©åˆ°é…ç½®ä»å¸¸è§æ¨¡å¼æ¨æ–­æ›´é€‚åˆæµå¼ä¼ è¾“ä¼ è¾“å±‚å¤šäº‘è¿›ç¨‹æ¶æ„ä½¿ç”¨äº†ä¸€ä¸ªå¼•äººå…¥èƒœçš„æŠ½è±¡ä¼ è¾“æŠ½è±¡æ¨¡å¼æœ¬åœ°è¿›ç¨‹é€šä¿¡å®æ—¶åŒå‘é€šä¿¡æœåŠ¡å™¨å‘é€äº‹ä»¶åŠŸèƒ½åå•†ä¼¼ä¹éµå¾ªåŠ¨æ€åŠŸèƒ½æ£€æµ‹ä¾èµ–ç±»åˆ«æ·±åº¦å‰–ææ ¸å¿ƒæ¡†æ¶ä¸ªåŒ…æ¡†æ¶ä¾èµ–é¡¹æ­ç¤ºäº†ä¸€ç§å¤æ‚çš„ç»ˆç«¯æ–¹æ³•åŒ…ç‰ˆæœ¬ç”¨é€”æŠ€æœ¯æ´å¯Ÿçš„æ¸²æŸ“å™¨è‡ªå®šä¹‰åè°ƒå™¨å®ç°ç»„ä»¶æ¨¡å‹å¯ç”¨å®Œæ•´å¹¶å‘åŠŸèƒ½å¸ƒå±€æå‡æ€§èƒ½å‚æ•°è§£ææ‰©å±•è‡ªå®šä¹‰é€‰é¡¹ç±»å‹ç»ˆç«¯æ ·å¼ä½¿ç”¨æ¨¡æ¿å­—é¢é‡è¯­æ³•é«˜äº®æ·»åŠ è‡ªå®šä¹‰è¯­è¨€å®šä¹‰ä»£ç ç§»é™¤ç”¨äºæ–‡æœ¬æµ‹é‡å®½åº¦è®¡ç®—å®Œæ•´æ”¯æŒæ–‡æœ¬æ¢è¡Œä¿æŒæ ·å¼åŠ è½½åŠ¨ç”»è‡ªå®šä¹‰å®šä¹‰ç‰ˆæœ¬ä»ç”Ÿæ€ç³»ç»Ÿå…¼å®¹æ€§åˆ†ææ¨æ–­æ€§èƒ½ä¼˜åŒ–æ¨¡å¼å¸¦ç¼“å­˜çš„å­—ç¬¦ä¸²å®½åº¦è®¡ç®—é›†æˆå †æ ˆä¸ªåŒ…é›†æˆæ­ç¤ºäº†ä¸€ä¸ªå…·æœ‰å¤æ‚æ•…éšœè½¬ç§»çš„å¤šä¾›åº”å•†ç­–ç•¥ä¾›åº”å•†é€‰æ‹©é€»è¾‘æ£€æŸ¥å¯†é’¥å¯ç”¨æ€§è¯„ä¼°è·¨ä¾›åº”å•†é€Ÿç‡é™åˆ¶è€ƒè™‘åŠŸèƒ½è¦æ±‚æµå¼ä¼ è¾“å·¥å…·åº”ç”¨æˆæœ¬ä¼˜åŒ–è§„åˆ™æ•…éšœè½¬ç§»é“¾ç»„ä»¶ä»æ¨¡å¼æ¨æ–­ä¸»è¦å®¢æˆ·ç«¯è¯·æ±‚ç­¾åæ™ºèƒ½é‡è¯•é€»è¾‘åè®®å®ç°å…±äº«ç±»å‹å®šä¹‰æ•°æ®å¤„ç†ä¸éªŒè¯ä¸ªåŒ…æ¨¡å¼ç¼–è¯‘æ¨¡å¼æ¨æ–­ç®€åŒ–ç‰ˆè½¬æ¢ç®¡é“æ€§èƒ½æ“ä½œåº“æ€§èƒ½å†…å­˜æ”¯æŒæµå¼å¤„ç†å¤§å°é™åˆ¶å›¾åƒè°ƒæ•´å¤§å°åŸç”Ÿå†…å­˜éªŒè¯å¿«é€Ÿå¤±è´¥æ–‡æœ¬å·®å¼‚ç®—æ³•å¸¦ç¡¬ä»¶åŠ é€Ÿæ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½ä¸ªåŒ…æ–‡ä»¶ç³»ç»Ÿä¾èµ–é¡¹å®ç°äº†ä¸€ä¸ªå¤æ‚çš„è¿‡æ»¤ç®¡é“ç”¨æˆ·æ¨¡å¼æ–‡ä»¶åˆ—è¡¨è§„åˆ™è‡ªå®šä¹‰è§„åˆ™è¿‡æ»¤ç»“æœæ¨¡å¼åŒ¹é…ä¼˜åŒ–ç¼–è¯‘æ¨¡å¼ç¼“å­˜æ¨æ–­é¥æµ‹ä¸å¯è§‚å¯Ÿæ€§ä¸ªåŒ…é¥æµ‹å †æ ˆå®ç°äº†æ·±åº¦é˜²å¾¡ç›‘æ§é›†æˆå±‚é”™è¯¯è¾¹ç•Œç”¨äºå´©æºƒçš„é”™è¯¯è¾¹ç•Œå…¨å±€å¤„ç†å™¨è¿›ç¨‹çº§æœªæ•è·å¼‚å¸¸æ‹’ç»æœªå¤„ç†çš„è·Ÿè¸ªæ£€æµ‹è‡ªå®šä¹‰å·¥ä½œçº¿ç¨‹ç›‘æ§æ€§èƒ½äº‹åŠ¡å’Œè·Ÿè¸ªä»ªè¡¨åŒ–å·¥å…·æ‰§è¡Œçš„è‡ªå®šä¹‰åˆ›å»ºåŠŸèƒ½æ ‡å¿—æ¨¡å¼æ¸è¿›å¼å‘å¸ƒé…ç½®æ¨æ–­æ¯ä¸ªç”¨æˆ·ä¿æŒä¸€è‡´éšè—çš„å®çŸ³ä¸“ä¸šåŒ–ä¾èµ–é¡¹ç”¨äºé€šä¿¡çš„è§£æåµŒå…¥çš„ä¼¼ä¹æ˜¯ä¸ºå“åº”è§£æè€Œå®šåˆ¶çš„æ¨æ–­çš„è§£æå™¨é…ç½®ä¿æŒä¸ºå­—ç¬¦ä¸²è‡ªå®šä¹‰æ ‡ç­¾å¤„ç†å™¨è§£æä¸­çš„å†…å®¹è§£æå™¨ä¹‹è°œå±æ€§åˆ—è¡¨è§£æå™¨çš„åŒ…å«æš—ç¤ºäº†ç‰¹å®šçš„ä¼˜åŒ–å¯èƒ½çš„ç”¨ä¾‹æ¨æ–­å­˜å‚¨åœ¨é’¥åŒ™ä¸²å¼•ç”¨ä¸­è·¨å¹³å°è¿›ç¨‹ç”Ÿæˆä¾èµ–é¡¹å¤„ç†å¹³å°å·®å¼‚æœåŠ¡å™¨å¯åŠ¨æ¨¡å¼æ­£ç¡®å¤„ç†ä¿ç•™å®‰å…¨é¿å…æ³¨å…¥ä¸Šä¸æ˜¾ç¤ºæ§åˆ¶å°çª—å£ä¾èµ–é¡¹å®‰å…¨è€ƒè™‘åŸºäºä¾èµ–é¡¹åˆ†æå‡ºç°äº†å‡ ç§å®‰å…¨æ¨¡å¼è¾“å…¥éªŒè¯å±‚ç”¨æˆ·è¾“å…¥æ¨¡å¼éªŒè¯æ•°æ®å·¥å…·æ‰§è¡Œæ‹’ç»æ²™ç›’åŒ–ä¾èµ–é¡¹æ²¡æœ‰ç›´æ¥ä½¿ç”¨ä½¿ç”¨æ²¡æœ‰ä½¿ç”¨é™¤äº†å—æ§çš„å·¥ä½œçº¿ç¨‹æ²¡æœ‰æ£€æµ‹åˆ°åŠ¨æ€æ¨¡å¼ç§˜å¯†ç®¡ç†ä»ç¼ºå°‘ç§˜å¯†å­˜å‚¨ä¾èµ–é¡¹æ¨æ–­çš„æ¨¡å¼é€šè¿‡ä½¿ç”¨åŸç”Ÿé’¥åŒ™ä¸²å›é€€åˆ°ç¯å¢ƒå˜é‡ä¾èµ–é¡¹é€‰æ‹©çš„æ€§èƒ½å½±å“å†…å­˜ç®¡ç†ç­–ç•¥ä¾èµ–é¡¹é€‰æ‹©æ­ç¤ºäº†ä»”ç»†çš„å†…å­˜ç®¡ç†æ–¹æ³•ç»„ä»¶ç­–ç•¥å®ç°æ–‡ä»¶è¯»å–æµå¼åˆ†å—è¯»å–å›¾åƒå¤„ç†åŸç”Ÿä¸å †å¤–è§£æé£æ ¼åŸºäºäº‹ä»¶å¸¸é‡å†…å­˜æ¨¡å¼åŒ¹é…ç¼–è¯‘é¢„ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼æ¸²æŸ“è™šæ‹Ÿæœ€å°ç»ˆç«¯æ›´æ–°å¯åŠ¨æ—¶é—´ä¼˜åŒ–ä¾èµ–é¡¹ç»“æ„åŒ–ç”¨äºå»¶è¿ŸåŠ è½½æ¨æ–­çš„å»¶è¿ŸåŠ è½½æ¨¡å¼æ­¤ä¾èµ–é¡¹åˆ†æåŸºäºåç¼–è¯‘å’Œé€†å‘å·¥ç¨‹å®é™…å®ç°ç»†èŠ‚å¯èƒ½æœ‰æ‰€ä¸åŒæ‰€å‘ˆç°çš„æ¨¡å¼å’Œæ´å¯Ÿä»£è¡¨äº†åŸºäºå¯è§‚å¯Ÿè¡Œä¸ºå’Œç”Ÿæ€ç³»ç»Ÿä¸­å¸¸è§å®è·µæ¨æ–­çš„æ¶æ„å†³ç­–æ–‡ä»¶æ€»ç»“æ¦‚è¿°æœ¬æ–‡æ¡£æ·±å…¥åˆ†æäº†çš„ä¾èµ–æ¶æ„æ­ç¤ºäº†å…¶é«˜æ€§èƒ½å’Œå¯é æ€§èƒŒåçš„æŠ€æœ¯å†³ç­–é€šè¿‡åç¼–è¯‘å’Œé€†å‘å·¥ç¨‹åˆ†ææ–‡æ¡£å±•ç°äº†å¦‚ä½•é€šè¿‡ç²¾å¿ƒé€‰æ‹©çš„ä¾èµ–é¡¹æ¥å®ç°å…¶å“è¶Šçš„åŠŸèƒ½æ ¸å¿ƒæ¶æ„ç‰¹ç‚¹ç»ˆç«¯æ¶æ„æŠ€æœ¯æ ˆåˆ›æ–°ç‚¹å°†çš„è™šæ‹Ÿå’Œåè°ƒç®—æ³•å¼•å…¥ç»ˆç«¯ç¯å¢ƒä¼˜åŠ¿å£°æ˜å¼çŠ¶æ€ç®¡ç†äºšæ¯«ç§’çº§å¸ƒå±€è®¡ç®—é«˜æ•ˆçš„ç»ˆç«¯å­—ç¬¦ä½ç½®ä¼˜åŒ–æ”¯æŒå¤æ‚çŠ¶æ€æƒé™å¯¹è¯æ¡†è¿›åº¦æŒ‡ç¤ºå™¨å¹¶å‘å·¥å…·æ‰§è¡Œæµå¼è§£æå™¨æ¶æ„è‡ªå®šä¹‰è§£æå™¨è§£æå™¨æ”¯æŒå¯¹è±¡åµŒå…¥å’Œé€’å½’å‘½ä»¤æ›¿æ¢è§£æå™¨é’ˆå¯¹å“åº”ä¼˜åŒ–çš„æµå¼è§£ææ ¸å¿ƒåˆ›æ–°é€šè¿‡å“¨å…µå­—ç¬¦ä¸²æœºåˆ¶å®ç°å¤æ‚é…ç½®å¯¹è±¡çš„å‘½ä»¤ä¼ é€’å¤šå¹³å°æŠ½è±¡å±‚æ”¯æŒçš„æä¾›å•†è®¾è®¡æ¨¡å¼å·¥å‚æ¨¡å¼é€‚é…å™¨æ¨¡å¼ç‰¹æ€§å…¨æµå¼æ”¯æŒè·¨åŒºåŸŸæ•…éšœè½¬ç§»è‡ªåŠ¨ä»¤ç‰Œåˆ·æ–°è®¤è¯é¥æµ‹ä¸‰é‡æ ˆé”™è¯¯è¿½è¸ªæ£€æµ‹é”™è¯¯è¾¹ç•Œæ€§èƒ½åˆ†ææŒ‡æ ‡ç›‘æ§è‡ªå®šä¹‰ä»¤ç‰Œè®¡æ•°å™¨å»¶è¿Ÿç›´æ–¹å›¾åŠŸèƒ½æ ‡å¿—æµ‹è¯•æ¸è¿›å¼æ¨å‡ºåŠ¨æ€é…ç½®æŠ€æœ¯äº®ç‚¹æ€§èƒ½ä¼˜åŒ–ç­–ç•¥å†…å­˜ç®¡ç†æµå¼æ–‡ä»¶è¯»å–å›¾åƒå¤„ç†ä½¿ç”¨åŸç”Ÿå †å¤–å†…å­˜é£æ ¼è§£æå¸¸é‡å†…å­˜é¢„ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼å¯åŠ¨æ—¶é—´ä¼˜åŒ–å»¶è¿ŸåŠ è½½ä¾èµ–é¡¹ç¼“å­˜æœºåˆ¶æŒ‰éœ€åˆå§‹åŒ–å®‰å…¨è€ƒè™‘è¾“å…¥éªŒè¯å±‚éªŒè¯æ²™ç›’åŒ–ä¾èµ–é¿å…ç›´æ¥ä½¿ç”¨å’Œç§˜å¯†ç®¡ç†å¹³å°ç‰¹å®šçš„å¯†é’¥å­˜å‚¨é’¥åŒ™ä¸²ç¯å¢ƒå˜é‡æ•°æ®å¤„ç†ç®¡é“è¾“å…¥æºç”¨æˆ·æ–‡æœ¬å†…å®¹å›¾åƒæ•°æ®è½¬æ¢å±‚éªŒè¯è§£æè½¬æ¢å›¾åƒå¤„ç†è¾“å‡ºç±»å‹å®‰å…¨æ•°æ®ä¼˜åŒ–å›¾åƒä¸“ä¸šåŒ–ä¾èµ–é¡¹éšè—çš„å®çŸ³é’ˆå¯¹é€šä¿¡å®šåˆ¶è§£æå™¨ç‰¹å®šä¼˜åŒ–è·¨å¹³å°è¿›ç¨‹ç”Ÿæˆæ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½æ¨¡å¼åŒ¹é…è¿‡æ»¤ç®¡é“å¿½ç•¥è§„åˆ™è‡ªå®šä¹‰è§„åˆ™æ€§èƒ½ä¼˜åŒ–ç¼“å­˜æ¨¡å¼åŒ¹é…å™¨æ¶æ„æ´å¯Ÿè®¾è®¡åŸåˆ™æ€§èƒ½ä¼˜å…ˆå¸ƒå±€å¼•æ“åŸç”Ÿå›¾åƒå¤„ç†è·¨å¹³å°å…¼å®¹ç»Ÿä¸€çš„æŠ½è±¡å±‚å¤„ç†å¹³å°å·®å¼‚å¯è§‚æµ‹æ€§ä¸‰é‡ç›‘æ§æ ˆç¡®ä¿ç”Ÿäº§ç¯å¢ƒç¨³å®šæ€§å®‰å…¨æ€§å¤šå±‚éªŒè¯å’Œæ²™ç›’åŒ–æœºåˆ¶å®ç°æ¨¡å¼å·¥å‚æ¨¡å¼å®¢æˆ·ç«¯åˆ›å»ºé€‚é…å™¨æ¨¡å¼å¤šæä¾›å•†ç»Ÿä¸€ç­–ç•¥æ¨¡å¼ä¸åŒå¹³å°çš„åŠŸèƒ½å®ç°è§‚å¯Ÿè€…æ¨¡å¼é¥æµ‹å’Œç›‘æ§æŠ€æœ¯ä»·å€¼åˆ›æ–°ç‚¹ç»ˆç«¯åº”ç”¨å°†ç°ä»£æŠ€æœ¯å¼•å…¥ç¯å¢ƒæµå¼è§£æå¤„ç†å¤æ‚çš„å“åº”æ ¼å¼å¤šäº‘æŠ½è±¡ç»Ÿä¸€çš„è®¿é—®æ¥å£æ£€æµ‹ç¯å¢ƒçš„åº”ç”¨æ— å“åº”æ£€æµ‹å·¥ç¨‹å®è·µä¾èµ–é¡¹é€‰æ‹©æ¯ä¸ªä¾èµ–éƒ½æœ‰æ˜ç¡®çš„æŠ€æœ¯ç›®çš„å†…å­˜ç®¡ç†ç²¾å¿ƒè®¾è®¡çš„å†…å­˜ä½¿ç”¨ç­–ç•¥é”™è¯¯å¤„ç†å…¨é¢çš„é”™è¯¯è¿½è¸ªå’ŒæŠ¥å‘Šæœºåˆ¶æ€§èƒ½ç›‘æ§è¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡å’Œåˆ†æç»“è®ºçš„æ¶æ„ä½“ç°äº†ç°ä»£è½¯ä»¶å·¥ç¨‹çš„æœ€ä½³å®è·µé€šè¿‡ç²¾å¿ƒé€‰æ‹©çš„ä¾èµ–é¡¹å’Œåˆ›æ–°çš„è®¾è®¡æ¨¡å¼å®ç°äº†é«˜æ€§èƒ½é«˜å¯é æ€§çš„å·¥å…·å…¶æ¶æ„ä¸ä»…è§£å†³äº†ä¼ ç»Ÿå·¥å…·çš„å±€é™æ€§è¿˜ä¸ºå¼€å‘è€…æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒè¿™ç§æ¶æ„è®¾è®¡çš„æˆåŠŸåœ¨äºæŠ€æœ¯åˆ›æ–°å°†ç”Ÿæ€å¼•å…¥ç»ˆç«¯ç¯å¢ƒå·¥ç¨‹å“è¶Šå…¨é¢çš„ç›‘æ§å®‰å…¨å’Œæ€§èƒ½ä¼˜åŒ–å®ç”¨ä¸»ä¹‰æ¯ä¸ªæŠ€æœ¯é€‰æ‹©éƒ½æœ‰æ˜ç¡®çš„ä¸šåŠ¡ä»·å€¼å¯æ‰©å±•æ€§æ¨¡å—åŒ–è®¾è®¡æ”¯æŒæœªæ¥åŠŸèƒ½æ‰©å±•æœ¬æ–‡æ¡£çš„åˆ†æä¸ºç†è§£ç°ä»£å·¥å…·çš„è®¾è®¡å’Œå®ç°æä¾›äº†å®è´µçš„å‚è€ƒç‰¹åˆ«æ˜¯å¯¹äºéœ€è¦åœ¨ç»ˆç«¯ç¯å¢ƒä¸­æä¾›å¤æ‚äº¤äº’åŠŸèƒ½çš„åº”ç”¨ç¨‹åº',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-10-24 18:27:01',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="æˆ‘çš„åšå®¢" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="åŠ è½½å¤´åƒ" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">æˆ‘çš„åšå®¢</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="éšæœºå‰å¾€ä¸€ä¸ªæ–‡ç« " href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="æœç´¢ğŸ”" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> æœç´¢</span></a></div><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="å¾®ä¿¡" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="æ”¯ä»˜å®" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">äº’åŠ¨</div><span class="author-content-item-title"> æœ€æ–°è¯„è®º</span></div><div class="aside-list"><span>æ­£åœ¨åŠ è½½ä¸­...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">å…´è¶£ç‚¹</div><span class="author-content-item-title">å¯»æ‰¾ä½ æ„Ÿå…´è¶£çš„é¢†åŸŸ</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size: 1.05rem;">AI<sup>1</sup></a><a href="/tags/Claude/" style="font-size: 1.05rem;">Claude<sup>1</sup></a><a href="/tags/Go/" style="font-size: 1.05rem;">Go<sup>1</sup></a><a href="/tags/Golang/" style="font-size: 1.05rem;">Golang<sup>1</sup></a><a href="/tags/HTML%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">HTMLåŸºç¡€<sup>1</sup></a><a href="/tags/SDK/" style="font-size: 1.05rem;">SDK<sup>1</sup></a><a href="/tags/base64/" style="font-size: 1.05rem;">base64<sup>1</sup></a><a href="/tags/canvas/" style="font-size: 1.05rem;">canvas<sup>2</sup></a><a href="/tags/cesium/" style="font-size: 1.05rem;">cesium<sup>1</sup></a><a href="/tags/css/" style="font-size: 1.05rem;">css<sup>5</sup></a><a href="/tags/docker/" style="font-size: 1.05rem;">docker<sup>3</sup></a><a href="/tags/echart/" style="font-size: 1.05rem;">echart<sup>1</sup></a><a href="/tags/electron/" style="font-size: 1.05rem;">electron<sup>2</sup></a><a href="/tags/elementUI/" style="font-size: 1.05rem;">elementUI<sup>1</sup></a><a href="/tags/flex/" style="font-size: 1.05rem;">flex<sup>1</sup></a><a href="/tags/git/" style="font-size: 1.05rem;">git<sup>3</sup></a><a href="/tags/javascript/" style="font-size: 1.05rem;">javascript<sup>1</sup></a><a href="/tags/js/" style="font-size: 1.05rem;">js<sup>2</sup></a><a href="/tags/position/" style="font-size: 1.05rem;">position<sup>1</sup></a><a href="/tags/vue/" style="font-size: 1.05rem;">vue<sup>17</sup></a><a href="/tags/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/" style="font-size: 1.05rem;">äº‹ä»¶å¾ªç¯<sup>1</sup></a><a href="/tags/%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC/" style="font-size: 1.05rem;">äº‹ä»¶ç›‘å¬<sup>1</sup></a><a href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 1.05rem;">å¯è§†åŒ–<sup>3</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 1.05rem;">åç«¯<sup>1</sup></a><a href="/tags/%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/" style="font-size: 1.05rem;">åŸºæœ¬å‘½ä»¤<sup>2</sup></a><a href="/tags/%E5%AD%98%E5%82%A8/" style="font-size: 1.05rem;">å­˜å‚¨<sup>1</sup></a><a href="/tags/%E5%AE%9E%E6%88%98/" style="font-size: 1.05rem;">å®æˆ˜<sup>31</sup></a><a href="/tags/%E5%B8%83%E5%B1%80/" style="font-size: 1.05rem;">å¸ƒå±€<sup>1</sup></a><a href="/tags/%E6%89%93%E5%8D%B0/" style="font-size: 1.05rem;">æ‰“å°<sup>1</sup></a><a href="/tags/%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/" style="font-size: 1.05rem;">æ’ä»¶å¼€å‘<sup>1</sup></a><a href="/tags/%E6%A8%AA%E7%AB%96%E5%B1%8F%E6%A3%80%E6%B5%8B/" style="font-size: 1.05rem;">æ¨ªç«–å±æ£€æµ‹<sup>1</sup></a><a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size: 1.05rem;">æ­£åˆ™<sup>4</sup></a><a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 1.05rem;">æµè§ˆå™¨<sup>5</sup></a><a href="/tags/%E7%9B%92%E6%A8%A1%E5%9E%8B/" style="font-size: 1.05rem;">ç›’æ¨¡å‹<sup>1</sup></a><a href="/tags/%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/" style="font-size: 1.05rem;">ç»„ä»¶é€šä¿¡<sup>2</sup></a><a href="/tags/%E7%BC%93%E5%AD%98/" style="font-size: 1.05rem;">ç¼“å­˜<sup>1</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 1.05rem;">ç¼–ç¨‹è¯­è¨€<sup>1</sup></a><a href="/tags/%E8%B7%AF%E7%94%B1/" style="font-size: 1.05rem;">è·¯ç”±<sup>1</sup></a><a href="/tags/%E8%BF%87%E6%BB%A4%E5%99%A8/" style="font-size: 1.05rem;">è¿‡æ»¤å™¨<sup>3</sup></a><a href="/tags/%E9%9F%B3%E9%A2%91/" style="font-size: 1.05rem;">éŸ³é¢‘<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>æ–‡ç« </span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>å½’æ¡£</span><a class="card-more-btn" href="/archives/" title="æŸ¥çœ‹æ›´å¤š">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">åäºŒæœˆ 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">åä¸€æœˆ 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">åæœˆ 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">21</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">å…«æœˆ 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">ä¸ƒæœˆ 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">å…­æœˆ 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">äº”æœˆ 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">å››æœˆ 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="è¾¹æ æ˜¾ç¤ºæ§åˆ¶"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="éŸ³ä¹å¼€å…³"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">åŸåˆ›</a><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">claude-codeåŸºç¡€æ¶æ„</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-10-23T05:37:22.000Z" title="å‘è¡¨äº 2025-10-23 13:37:22">2025-10-23</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-10-24T10:27:01.744Z" title="æ›´æ–°äº 2025-10-24 18:27:01">2025-10-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="ä½œè€…IPå±åœ°ä¸ºåŒ—äº¬"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>åŒ—äº¬</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://hanshuang-ai.github.io/2025/10/23/claude-code-ji-chu-jia-gou/"><header><h1 id="CrawlerTitle" itemprop="name headline">claude-codeåŸºç¡€æ¶æ„</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">å¯’éœœ</span><time itemprop="dateCreated datePublished" datetime="2025-10-23T05:37:22.000Z" title="å‘è¡¨äº 2025-10-23 13:37:22">2025-10-23</time><time itemprop="dateCreated datePublished" datetime="2025-10-24T10:27:01.744Z" title="æ›´æ–°äº 2025-10-24 18:27:01">2025-10-24</time></header><p><a target="_blank" rel="noopener" href="https://southbridge-research.notion.site/Dependencies-The-Foundation-of-Claude-Code-s-Architecture-2055fec70db181b3bb72cdfe615fad3c">å‚è€ƒé“¾æ¥</a></p>
<h1 id="Dependencies-The-Foundation-of-Claude-Codeâ€™s-Architecture"><a href="#Dependencies-The-Foundation-of-Claude-Codeâ€™s-Architecture" class="headerlink" title="Dependencies: The Foundation of Claude Codeâ€™s Architecture"></a>Dependencies: The Foundation of Claude Codeâ€™s Architecture</h1><h2 id="ä¾èµ–ï¼šClaude-Codeæ¶æ„çš„åŸºç¡€"><a href="#ä¾èµ–ï¼šClaude-Codeæ¶æ„çš„åŸºç¡€" class="headerlink" title="ä¾èµ–ï¼šClaude Codeæ¶æ„çš„åŸºç¡€"></a>ä¾èµ–ï¼šClaude Codeæ¶æ„çš„åŸºç¡€</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2025/10/23/claude-code-ji-chu-jia-gou/1.webp" class="">

<p><code>*\*</code> Indicates likely custom/embedded implementation based on decompilation analysis*<br><code>*\*</code> è¡¨ç¤ºåŸºäºåç¼–è¯‘åˆ†æå¯èƒ½çš„è‡ªå®šä¹‰/åµŒå…¥å¼å®ç°*</p>
<h2 id="The-Unconventional-Choices-That-Define-Performance"><a href="#The-Unconventional-Choices-That-Define-Performance" class="headerlink" title="The Unconventional Choices That Define Performance"></a>The Unconventional Choices That Define Performance</h2><h2 id="å®šä¹‰æ€§èƒ½çš„éä¼ ç»Ÿé€‰æ‹©"><a href="#å®šä¹‰æ€§èƒ½çš„éä¼ ç»Ÿé€‰æ‹©" class="headerlink" title="å®šä¹‰æ€§èƒ½çš„éä¼ ç»Ÿé€‰æ‹©"></a>å®šä¹‰æ€§èƒ½çš„éä¼ ç»Ÿé€‰æ‹©</h2><p>Claude Codeâ€™s dependency architecture reveals several fascinating implementation decisions that directly contribute to its renowned performance and reliability. Letâ€™s explore the most technically interesting aspects first.<br>Claude Codeçš„ä¾èµ–æ¶æ„æ­ç¤ºäº†å‡ ä¸ªå¼•äººå…¥èƒœçš„å®ç°å†³ç­–ï¼Œè¿™äº›å†³ç­–ç›´æ¥è´¡çŒ®äº†å…¶è‘—åçš„æ€§èƒ½å’Œå¯é æ€§ã€‚è®©æˆ‘ä»¬å…ˆæ¢ç´¢æŠ€æœ¯ä¸Šæœ€æœ‰è¶£çš„æ–¹é¢ã€‚</p>
<h3 id="ğŸ”-The-React-in-Terminal-Architecture"><a href="#ğŸ”-The-React-in-Terminal-Architecture" class="headerlink" title="ğŸ” The React-in-Terminal Architecture"></a>ğŸ” The React-in-Terminal Architecture</h3><h3 id="ğŸ”-ç»ˆç«¯ä¸­çš„Reactæ¶æ„"><a href="#ğŸ”-ç»ˆç«¯ä¸­çš„Reactæ¶æ„" class="headerlink" title="ğŸ” ç»ˆç«¯ä¸­çš„Reactæ¶æ„"></a>ğŸ” ç»ˆç«¯ä¸­çš„Reactæ¶æ„</h3><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token comment">// The core rendering pipeline appears to implement:</span>
<span class="token comment">// æ ¸å¿ƒæ¸²æŸ“ç®¡é“ä¼¼ä¹å®ç°äº†ï¼š</span>
<span class="token keyword">interface</span> <span class="token class-name">CliRenderPipeline</span> <span class="token punctuation">&#123;</span>
  react<span class="token operator">:</span> <span class="token string">"^18.2.0"</span><span class="token punctuation">,</span>      <span class="token comment">// Full React reconciler å®Œæ•´çš„Reactåè°ƒå™¨</span>
  ink<span class="token operator">:</span> <span class="token string">"^3.2.0"</span><span class="token punctuation">,</span>         <span class="token comment">// Terminal renderer ç»ˆç«¯æ¸²æŸ“å™¨</span>
  yoga<span class="token operator">:</span> <span class="token string">"^2.0.0-beta.1"</span>  <span class="token comment">// Flexbox layout engine (WebAssembly) Flexboxå¸ƒå±€å¼•æ“(WebAssembly)</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>Why This Matters</strong>: Unlike traditional CLI tools that manage state imperatively, Claude Code leverages Reactâ€™s reconciliation algorithm for terminal UI. This means:<br><strong>ä¸ºä½•é‡è¦</strong>ï¼šä¸ä¼ ç»Ÿå‘½ä»¤å¼ç®¡ç†çŠ¶æ€çš„CLIå·¥å…·ä¸åŒï¼ŒClaude Codeåˆ©ç”¨Reactçš„åè°ƒç®—æ³•æ¥å¤„ç†ç»ˆç«¯UIã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>Virtual DOM in the Terminal</strong>: Every UI update goes through Reactâ€™s diffing algorithm before yoga-layout calculates the optimal terminal character positions</li>
<li><strong>ç»ˆç«¯ä¸­çš„è™šæ‹ŸDOM</strong>ï¼šæ¯æ¬¡UIæ›´æ–°éƒ½è¦ç»è¿‡Reactçš„å·®å¼‚ç®—æ³•ï¼Œç„¶åyoga-layoutè®¡ç®—æœ€ä½³çš„ç»ˆç«¯å­—ç¬¦ä½ç½®</li>
<li><strong>Declarative UI State</strong>: Complex UI states (permission dialogs, progress indicators, concurrent tool execution) are managed declaratively</li>
<li><strong>å£°æ˜å¼UIçŠ¶æ€</strong>ï¼šå¤æ‚çš„UIçŠ¶æ€ï¼ˆæƒé™å¯¹è¯æ¡†ã€è¿›åº¦æŒ‡ç¤ºå™¨ã€å¹¶å‘å·¥å…·æ‰§è¡Œï¼‰éƒ½ä»¥å£°æ˜æ–¹å¼ç®¡ç†</li>
<li><strong>Performance</strong>: The yoga-layout WebAssembly module provides sub-millisecond layout calculations even for complex UIs</li>
<li><strong>æ€§èƒ½</strong>ï¼šyoga-layout WebAssemblyæ¨¡å—ä¸ºå¤æ‚UIæä¾›äºšæ¯«ç§’çº§çš„å¸ƒå±€è®¡ç®—</li>
</ul>
<p>â”Œâ”€ <strong>Implementation Insight</strong> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ The yoga-layout-prebuilt dependency suggests Claude Code        â”‚<br>â”‚ pre-compiles layout constraints, trading memory for speed       â”‚<br>â”‚ during rapid UI updates (e.g., streaming LLM responses)         â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”Œâ”€ <strong>å®ç°æ´å¯Ÿ</strong> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ yoga-layout-prebuiltä¾èµ–è¡¨æ˜Claude Code                          â”‚<br>â”‚ é¢„ç¼–è¯‘å¸ƒå±€çº¦æŸï¼Œåœ¨å¿«é€ŸUIæ›´æ–°æœŸé—´ï¼ˆå¦‚æµå¼LLMå“åº”ï¼‰ç”¨å†…å­˜æ¢å–é€Ÿåº¦    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<h3 id="ğŸ”-The-Streaming-Parser-Architecture"><a href="#ğŸ”-The-Streaming-Parser-Architecture" class="headerlink" title="ğŸ” The Streaming Parser Architecture"></a>ğŸ” The Streaming Parser Architecture</h3><h3 id="ğŸ”-æµå¼è§£æå™¨æ¶æ„"><a href="#ğŸ”-æµå¼è§£æå™¨æ¶æ„" class="headerlink" title="ğŸ” æµå¼è§£æå™¨æ¶æ„"></a>ğŸ” æµå¼è§£æå™¨æ¶æ„</h3><p>Based on decompilation analysis, Claude Code appears to embed custom implementations of critical parsers:<br>åŸºäºåç¼–è¯‘åˆ†æï¼ŒClaude Codeä¼¼ä¹åµŒå…¥äº†å…³é”®è§£æå™¨çš„è‡ªå®šä¹‰å®ç°ï¼š</p>
<pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token comment">// Inferred parser capabilities from dependency analysis</span>
<span class="token comment">// ä»ä¾èµ–åˆ†ææ¨æ–­çš„è§£æå™¨åŠŸèƒ½</span>
<span class="token keyword">const</span> <span class="token constant">CUSTOM_PARSERS</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token string-property property">'shell-parse'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    features<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'JSON object embedding via sentinel strings'</span><span class="token punctuation">,</span> <span class="token comment">// é€šè¿‡å“¨å…µå­—ç¬¦ä¸²åµŒå…¥JSONå¯¹è±¡</span>
      <span class="token string">'Recursive command substitution'</span><span class="token punctuation">,</span> <span class="token comment">// é€’å½’å‘½ä»¤æ›¿æ¢</span>
      <span class="token string">'Environment variable expansion with type preservation'</span> <span class="token comment">// ä¿æŒç±»å‹çš„ç¯å¢ƒå˜é‡å±•å¼€</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    performance<span class="token operator">:</span> <span class="token string">'O(n) with single-pass tokenization'</span> <span class="token comment">// O(n)å•æ¬¡éå†æ ‡è®°åŒ–æ€§èƒ½</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token string-property property">'fast-xml-parser'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    features<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'Streaming XML parsing for tool calls'</span><span class="token punctuation">,</span> <span class="token comment">// å·¥å…·è°ƒç”¨çš„æµå¼XMLè§£æ</span>
      <span class="token string">'Partial document recovery'</span><span class="token punctuation">,</span> <span class="token comment">// éƒ¨åˆ†æ–‡æ¡£æ¢å¤</span>
      <span class="token string">'Custom entity handling for LLM outputs'</span> <span class="token comment">// LLMè¾“å‡ºçš„è‡ªå®šä¹‰å®ä½“å¤„ç†</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    performance<span class="token operator">:</span> <span class="token string">'Constant memory usage regardless of document size'</span> <span class="token comment">// æ— è®ºæ–‡æ¡£å¤§å°å¦‚ä½•éƒ½ä½¿ç”¨æ’å®šå†…å­˜</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>The Shell Parserâ€™s Secret Weapon</strong>:<br><strong>Shellè§£æå™¨çš„ç§˜å¯†æ­¦å™¨</strong>ï¼š</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// Conceptual implementation based on analysis</span>
<span class="token comment">// åŸºäºåˆ†æçš„æ¦‚å¿µå®ç°</span>
<span class="token keyword">function</span> <span class="token function">parseShellWithObjects</span><span class="token punctuation">(</span><span class="token parameter">cmd<span class="token punctuation">,</span> env</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> <span class="token constant">SENTINEL</span> <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">randomBytes</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Phase 1: Object serialization</span>
  <span class="token comment">// é˜¶æ®µ1ï¼šå¯¹è±¡åºåˆ—åŒ–</span>
  <span class="token keyword">const</span> processedEnv <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> val<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      acc<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">SENTINEL</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token constant">SENTINEL</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
      acc<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Phase 2: Standard shell parsing with sentinel preservation</span>
  <span class="token comment">// é˜¶æ®µ2ï¼šä¿ç•™å“¨å…µçš„æ ‡å‡†shellè§£æ</span>
  <span class="token keyword">const</span> tokens <span class="token operator">=</span> <span class="token function">shellParse</span><span class="token punctuation">(</span>cmd<span class="token punctuation">,</span> processedEnv<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Phase 3: Object rehydration</span>
  <span class="token comment">// é˜¶æ®µ3ï¼šå¯¹è±¡é‡æ–°æ°´åŒ–</span>
  <span class="token keyword">return</span> tokens<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">token</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">^</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token constant">SENTINEL</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.*</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token constant">SENTINEL</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">$</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token constant">SENTINEL</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token constant">SENTINEL</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> token<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>This allows Claude Code to pass complex configuration objects through shell commandsâ€”a capability not found in standard shell parsers.<br>è¿™ä½¿å¾—Claude Codeèƒ½å¤Ÿé€šè¿‡shellå‘½ä»¤ä¼ é€’å¤æ‚çš„é…ç½®å¯¹è±¡â€”â€”è¿™æ˜¯æ ‡å‡†shellè§£æå™¨ä¸­æ‰¾ä¸åˆ°çš„åŠŸèƒ½ã€‚</p>
<h3 id="ğŸ”-The-Multi-Platform-LLM-Abstraction-Layer"><a href="#ğŸ”-The-Multi-Platform-LLM-Abstraction-Layer" class="headerlink" title="ğŸ” The Multi-Platform LLM Abstraction Layer"></a>ğŸ” The Multi-Platform LLM Abstraction Layer</h3><h3 id="ğŸ”-å¤šå¹³å°LLMæŠ½è±¡å±‚"><a href="#ğŸ”-å¤šå¹³å°LLMæŠ½è±¡å±‚" class="headerlink" title="ğŸ” å¤šå¹³å°LLMæŠ½è±¡å±‚"></a>ğŸ” å¤šå¹³å°LLMæŠ½è±¡å±‚</h3><p>The dependency structure reveals a sophisticated multi-vendor approach:<br>ä¾èµ–ç»“æ„æ­ç¤ºäº†ä¸€ä¸ªå¤æ‚çš„å¤šä¾›åº”å•†æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th>Platform</th>
<th>Primary SDK</th>
<th>Streaming</th>
<th>Specialized Features</th>
</tr>
</thead>
<tbody><tr>
<td>Anthropic</td>
<td>Native SDK</td>
<td>âœ“ Full SSE</td>
<td>Thinking blocks, cache control</td>
</tr>
<tr>
<td>AWS Bedrock</td>
<td>@aws-sdk/client-bedrock-runtime</td>
<td>âœ“ Custom adapter</td>
<td>Cross-region failover, SigV4 auth</td>
</tr>
<tr>
<td>Google Vertex</td>
<td>google-auth-library + custom</td>
<td>âœ“ Via adapter</td>
<td>Automatic token refresh</td>
</tr>
<tr>
<td>å¹³å°</td>
<td>ä¸»è¦SDK</td>
<td>æµå¼ä¼ è¾“</td>
<td>ä¸“ç”¨åŠŸèƒ½</td>
</tr>
<tr>
<td>â€”</td>
<td>â€”</td>
<td>â€”</td>
<td>â€”</td>
</tr>
<tr>
<td>Anthropic</td>
<td>åŸç”ŸSDK</td>
<td>âœ“ å®Œæ•´SSE</td>
<td>æ€ç»´å—ï¼Œç¼“å­˜æ§åˆ¶</td>
</tr>
<tr>
<td>AWS Bedrock</td>
<td>@aws-sdk/client-bedrock-runtime</td>
<td>âœ“ è‡ªå®šä¹‰é€‚é…å™¨</td>
<td>è·¨åŒºåŸŸæ•…éšœè½¬ç§»ï¼ŒSigV4è®¤è¯</td>
</tr>
<tr>
<td>Google Vertex</td>
<td>google-auth-library + è‡ªå®šä¹‰</td>
<td>âœ“ é€šè¿‡é€‚é…å™¨</td>
<td>è‡ªåŠ¨ä»¤ç‰Œåˆ·æ–°</td>
</tr>
</tbody></table>
<p><strong>Implementation Pattern</strong>:<br><strong>å®ç°æ¨¡å¼</strong>ï¼š</p>
<pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token comment">// Inferred factory pattern from dependencies</span>
<span class="token comment">// ä»ä¾èµ–é¡¹æ¨æ–­çš„å·¥å‚æ¨¡å¼</span>
<span class="token keyword">class</span> <span class="token class-name">LLMClientFactory</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">static</span> <span class="token function">create</span><span class="token punctuation">(</span>provider<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> StreamingLLMClient <span class="token punctuation">&#123;</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>provider<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">case</span> <span class="token string">'anthropic'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AnthropicStreamAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'bedrock'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BedrockStreamAdapter</span><span class="token punctuation">(</span>
          <span class="token keyword">new</span> <span class="token class-name">BedrockRuntimeClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token keyword">new</span> <span class="token class-name">SigV4Signer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'vertex'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">VertexStreamAdapter</span><span class="token punctuation">(</span>
          <span class="token keyword">new</span> <span class="token class-name">GoogleAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token keyword">new</span> <span class="token class-name">CustomHTTPClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="ğŸ”-The-Telemetry-Triple-Stack"><a href="#ğŸ”-The-Telemetry-Triple-Stack" class="headerlink" title="ğŸ” The Telemetry Triple-Stack"></a>ğŸ” The Telemetry Triple-Stack</h3><h3 id="ğŸ”-é¥æµ‹ä¸‰é‡æ ˆ"><a href="#ğŸ”-é¥æµ‹ä¸‰é‡æ ˆ" class="headerlink" title="ğŸ” é¥æµ‹ä¸‰é‡æ ˆ"></a>ğŸ” é¥æµ‹ä¸‰é‡æ ˆ</h3><p>Claude Code implements a comprehensive observability strategy using three complementary systems:<br>Claude Codeä½¿ç”¨ä¸‰ä¸ªäº’è¡¥ç³»ç»Ÿå®ç°äº†å…¨é¢çš„å¯è§‚å¯Ÿæ€§ç­–ç•¥ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">â”Œâ”€ Error Tracking â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ Metrics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ Feature Flags â”€â”€â”€â”€â”
â”‚ @sentry&#x2F;node             â”‚  â”‚ @opentelemetry&#x2F;api    â”‚  â”‚ statsig-node      â”‚
â”‚ â”œâ”€ ANR detection         â”‚  â”‚ â”œâ”€ Custom spans       â”‚  â”‚ â”œâ”€ A&#x2F;B testing    â”‚
â”‚ â”œâ”€ Error boundaries      â”‚  â”‚ â”œâ”€ Token counters     â”‚  â”‚ â”œâ”€ Gradual rolloutâ”‚
â”‚ â””â”€ Performance profiling â”‚  â”‚ â””â”€ Latency histograms â”‚  â”‚ â””â”€ Dynamic config â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                              â†“                          â†“
        Debugging                    Optimization              Experimentation
â”Œâ”€ é”™è¯¯è¿½è¸ª â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ æŒ‡æ ‡ç›‘æ§ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ åŠŸèƒ½æ ‡å¿— â”€â”€â”€â”€â”
â”‚ @sentry&#x2F;node             â”‚  â”‚ @opentelemetry&#x2F;api    â”‚  â”‚ statsig-node      â”‚
â”‚ â”œâ”€ ANRæ£€æµ‹             â”‚  â”‚ â”œâ”€ è‡ªå®šä¹‰span         â”‚  â”‚ â”œâ”€ A&#x2F;Bæµ‹è¯•       â”‚
â”‚ â”œâ”€ é”™è¯¯è¾¹ç•Œ           â”‚  â”‚ â”œâ”€ Tokenè®¡æ•°å™¨        â”‚  â”‚ â”œâ”€ æ¸è¿›å¼å‘å¸ƒ    â”‚
â”‚ â””â”€ æ€§èƒ½åˆ†æ           â”‚  â”‚ â””â”€ å»¶è¿Ÿç›´æ–¹å›¾         â”‚  â”‚ â””â”€ åŠ¨æ€é…ç½®      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                              â†“                          â†“
         è°ƒè¯•                           ä¼˜åŒ–                    å®éªŒ
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>The ANR Detection Innovation</strong> (inferred from Sentry integration patterns):<br><strong>ANRæ£€æµ‹åˆ›æ–°</strong>ï¼ˆä»Sentryé›†æˆæ¨¡å¼æ¨æ–­ï¼‰ï¼š</p>
<pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token comment">// Application Not Responding detection for Node.js</span>
<span class="token comment">// Node.jsåº”ç”¨ç¨‹åºæ— å“åº”æ£€æµ‹</span>
<span class="token keyword">class</span> <span class="token class-name">ANRDetector</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">private</span> worker<span class="token operator">:</span> Worker<span class="token punctuation">;</span>
  <span class="token keyword">private</span> heartbeatInterval <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span> <span class="token comment">// ms</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Spawn a worker thread that expects heartbeats</span>
    <span class="token comment">// ç”Ÿæˆä¸€ä¸ªæœŸæœ›å¿ƒè·³çš„workerçº¿ç¨‹</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      let lastPing = Date.now();
      setInterval(() => &#123;
        if (Date.now() - lastPing > 5000) &#123;
          parentPort.postMessage(&#123;
            type: 'anr',
            stack: getMainThreadStack() // Via inspector protocol
            // é€šè¿‡æ£€æŸ¥å™¨åè®®è·å–
          &#125;);
        &#125;
      &#125;, 100);
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> eval<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Main thread sends heartbeats</span>
    <span class="token comment">// ä¸»çº¿ç¨‹å‘é€å¿ƒè·³</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> type<span class="token operator">:</span> <span class="token string">'ping'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heartbeatInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>This allows Claude Code to detect and report when the main event loop is blockedâ€”critical for identifying performance issues in production.<br>è¿™ä½¿å¾—Claude Codeèƒ½å¤Ÿæ£€æµ‹å’ŒæŠ¥å‘Šä¸»äº‹ä»¶å¾ªç¯è¢«é˜»å¡çš„æƒ…å†µâ€”â€”å¯¹äºè¯†åˆ«ç”Ÿäº§ç¯å¢ƒä¸­çš„æ€§èƒ½é—®é¢˜è‡³å…³é‡è¦ã€‚</p>
<h3 id="ğŸ”-Data-Transformation-Pipeline"><a href="#ğŸ”-Data-Transformation-Pipeline" class="headerlink" title="ğŸ” Data Transformation Pipeline"></a>ğŸ” Data Transformation Pipeline</h3><h3 id="ğŸ”-æ•°æ®è½¬æ¢ç®¡é“"><a href="#ğŸ”-æ•°æ®è½¬æ¢ç®¡é“" class="headerlink" title="ğŸ” æ•°æ®è½¬æ¢ç®¡é“"></a>ğŸ” æ•°æ®è½¬æ¢ç®¡é“</h3><p>The data processing dependencies form a sophisticated pipeline:<br>æ•°æ®å¤„ç†ä¾èµ–é¡¹å½¢æˆäº†ä¸€ä¸ªå¤æ‚çš„ç®¡é“ï¼š</p>
<pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> LR
    <span class="token keyword">subgraph</span> Input
        UserText<span class="token text string">[User Text]</span>
        WebContent<span class="token text string">[Web Content]</span>
        Images<span class="token text string">[Images]</span>
        JSON<span class="token text string">[JSON Data]</span>
    <span class="token keyword">end</span>

    <span class="token keyword">subgraph</span> Transform
        UserText <span class="token arrow operator">--></span> Zod<span class="token text string">&#123;Zod Validation&#125;</span>
        WebContent <span class="token arrow operator">--></span> Marked<span class="token text string">[Markdown Parser]</span>
        WebContent <span class="token arrow operator">--></span> Turndown<span class="token text string">[HTMLâ†’MD]</span>
        Images <span class="token arrow operator">--></span> Sharp<span class="token text string">[Image Processor]</span>
        JSON <span class="token arrow operator">--></span> Zod
    <span class="token keyword">end</span>

    <span class="token keyword">subgraph</span> Output
        Zod <span class="token arrow operator">--></span> ValidatedData<span class="token text string">[Type-Safe Data]</span>
        Marked <span class="token arrow operator">--></span> MarkdownAST<span class="token text string">[Markdown AST]</span>
        Turndown <span class="token arrow operator">--></span> MarkdownText<span class="token text string">[Markdown Text]</span>
        Sharp <span class="token arrow operator">--></span> OptimizedImage<span class="token text string">[Resized/Compressed]</span>
    <span class="token keyword">end</span>

    ValidatedData <span class="token arrow operator">--></span> LLM<span class="token text string">[To LLM]</span>
    MarkdownAST <span class="token arrow operator">--></span> LLM
    MarkdownText <span class="token arrow operator">--></span> LLM
    OptimizedImage <span class="token arrow operator">--></span> LLM

    <span class="token keyword">subgraph</span> è¾“å…¥
        UserText<span class="token text string">[ç”¨æˆ·æ–‡æœ¬]</span>
        WebContent<span class="token text string">[ç½‘é¡µå†…å®¹]</span>
        Images<span class="token text string">[å›¾åƒ]</span>
        JSON<span class="token text string">[JSONæ•°æ®]</span>
    <span class="token keyword">end</span>

    <span class="token keyword">subgraph</span> è½¬æ¢
        UserText <span class="token arrow operator">--></span> Zod<span class="token text string">&#123;ZodéªŒè¯&#125;</span>
        WebContent <span class="token arrow operator">--></span> Marked<span class="token text string">[Markdownè§£æå™¨]</span>
        WebContent <span class="token arrow operator">--></span> Turndown<span class="token text string">[HTMLâ†’MD]</span>
        Images <span class="token arrow operator">--></span> Sharp<span class="token text string">[å›¾åƒå¤„ç†å™¨]</span>
        JSON <span class="token arrow operator">--></span> Zod
    <span class="token keyword">end</span>

    <span class="token keyword">subgraph</span> è¾“å‡º
        Zod <span class="token arrow operator">--></span> ValidatedData<span class="token text string">[ç±»å‹å®‰å…¨æ•°æ®]</span>
        Marked <span class="token arrow operator">--></span> MarkdownAST<span class="token text string">[Markdown AST]</span>
        Turndown <span class="token arrow operator">--></span> MarkdownText<span class="token text string">[Markdownæ–‡æœ¬]</span>
        Sharp <span class="token arrow operator">--></span> OptimizedImage<span class="token text string">[è°ƒæ•´å¤§å°/å‹ç¼©]</span>
    <span class="token keyword">end</span>

    ValidatedData <span class="token arrow operator">--></span> LLM<span class="token text string">[åˆ°LLM]</span>
    MarkdownAST <span class="token arrow operator">--></span> LLM
    MarkdownText <span class="token arrow operator">--></span> LLM
    OptimizedImage <span class="token arrow operator">--></span> LLM
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2025/10/23/claude-code-ji-chu-jia-gou/2.svg" class="">
<p><strong>Sharp Configuration</strong> (inferred from common patterns):<br><strong>Sharpé…ç½®</strong>ï¼ˆä»å¸¸è§æ¨¡å¼æ¨æ–­ï¼‰ï¼š</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> imageProcessor <span class="token operator">=</span> <span class="token function">sharp</span><span class="token punctuation">(</span>inputBuffer<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">fit</span><span class="token operator">:</span> <span class="token string">'inside'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">withoutEnlargement</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">jpeg</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">quality</span><span class="token operator">:</span> <span class="token number">85</span><span class="token punctuation">,</span>
    <span class="token literal-property property">progressive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// Better for streaming</span>
    <span class="token comment">// æ›´é€‚åˆæµå¼ä¼ è¾“</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="ğŸ”-The-MCP-Transport-Layer"><a href="#ğŸ”-The-MCP-Transport-Layer" class="headerlink" title="ğŸ” The MCP Transport Layer"></a>ğŸ” The MCP Transport Layer</h3><h3 id="ğŸ”-MCPä¼ è¾“å±‚"><a href="#ğŸ”-MCPä¼ è¾“å±‚" class="headerlink" title="ğŸ” MCPä¼ è¾“å±‚"></a>ğŸ” MCPä¼ è¾“å±‚</h3><p>The Multi-Cloud/Process architecture uses a fascinating abstraction:<br>å¤šäº‘/è¿›ç¨‹æ¶æ„ä½¿ç”¨äº†ä¸€ä¸ªå¼•äººå…¥èƒœçš„æŠ½è±¡ï¼š</p>
<pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token comment">// Transport abstraction pattern</span>
<span class="token comment">// ä¼ è¾“æŠ½è±¡æ¨¡å¼</span>
<span class="token keyword">interface</span> <span class="token class-name">MCPTransport</span> <span class="token punctuation">&#123;</span>
  stdio<span class="token operator">:</span> <span class="token string">'cross-spawn'</span><span class="token punctuation">,</span>     <span class="token comment">// Local process communication</span>
  <span class="token comment">// æœ¬åœ°è¿›ç¨‹é€šä¿¡</span>
  websocket<span class="token operator">:</span> <span class="token string">'ws'</span><span class="token punctuation">,</span>          <span class="token comment">// Real-time bidirectional</span>
  <span class="token comment">// å®æ—¶åŒå‘é€šä¿¡</span>
  sse<span class="token operator">:</span> <span class="token string">'eventsource'</span>        <span class="token comment">// Server-sent events</span>
  <span class="token comment">// æœåŠ¡å™¨å‘é€äº‹ä»¶</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Capability negotiation appears to follow:</span>
<span class="token comment">// åŠŸèƒ½åå•†ä¼¼ä¹éµå¾ªï¼š</span>
<span class="token keyword">class</span> <span class="token class-name">MCPClient</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">async</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> capabilities <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>transport<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'initialize'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
      capabilities<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        tools<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        resources<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        prompts<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        logging<span class="token operator">:</span> <span class="token punctuation">&#123;</span> level<span class="token operator">:</span> <span class="token string">'info'</span> <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Dynamic feature detection</span>
    <span class="token comment">// åŠ¨æ€åŠŸèƒ½æ£€æµ‹</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>features <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">negotiateFeatures</span><span class="token punctuation">(</span>capabilities<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Dependency-Categories-Deep-Dive"><a href="#Dependency-Categories-Deep-Dive" class="headerlink" title="Dependency Categories Deep Dive"></a>Dependency Categories Deep Dive</h2><h2 id="ä¾èµ–ç±»åˆ«æ·±åº¦å‰–æ"><a href="#ä¾èµ–ç±»åˆ«æ·±åº¦å‰–æ" class="headerlink" title="ä¾èµ–ç±»åˆ«æ·±åº¦å‰–æ"></a>ä¾èµ–ç±»åˆ«æ·±åº¦å‰–æ</h2><h3 id="Core-CLI-Framework-15-packages"><a href="#Core-CLI-Framework-15-packages" class="headerlink" title="Core CLI Framework (15+ packages)"></a>Core CLI Framework (15+ packages)</h3><h3 id="æ ¸å¿ƒCLIæ¡†æ¶ï¼ˆ15-ä¸ªåŒ…ï¼‰"><a href="#æ ¸å¿ƒCLIæ¡†æ¶ï¼ˆ15-ä¸ªåŒ…ï¼‰" class="headerlink" title="æ ¸å¿ƒCLIæ¡†æ¶ï¼ˆ15+ä¸ªåŒ…ï¼‰"></a>æ ¸å¿ƒCLIæ¡†æ¶ï¼ˆ15+ä¸ªåŒ…ï¼‰</h3><p>The CLI framework dependencies reveal a sophisticated approach to terminal UI:<br>CLIæ¡†æ¶ä¾èµ–é¡¹æ­ç¤ºäº†ä¸€ç§å¤æ‚çš„ç»ˆç«¯UIæ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th>Package</th>
<th>Version*</th>
<th>Purpose</th>
<th>Technical Insight</th>
</tr>
</thead>
<tbody><tr>
<td><code>ink</code></td>
<td>^3.2.0</td>
<td>React renderer for CLI</td>
<td>Custom reconciler implementation</td>
</tr>
<tr>
<td><code>react</code></td>
<td>^18.2.0</td>
<td>UI component model</td>
<td>Full concurrent features enabled</td>
</tr>
<tr>
<td><code>yoga-layout-prebuilt</code></td>
<td>^1.10.0</td>
<td>Flexbox layout</td>
<td>WebAssembly for performance</td>
</tr>
<tr>
<td><code>commander</code></td>
<td>^9.0.0</td>
<td>Argument parsing</td>
<td>Extended with custom option types</td>
</tr>
<tr>
<td><code>chalk</code></td>
<td>^4.1.2</td>
<td>Terminal styling</td>
<td>Template literal API utilized</td>
</tr>
<tr>
<td><code>cli-highlight</code></td>
<td>^2.1.11</td>
<td>Syntax highlighting</td>
<td>Custom language definitions added</td>
</tr>
<tr>
<td><code>strip-ansi</code></td>
<td>^6.0.1</td>
<td>ANSI code removal</td>
<td>Used in text measurement</td>
</tr>
<tr>
<td><code>string-width</code></td>
<td>^4.2.3</td>
<td>Unicode width calc</td>
<td>Full emoji support</td>
</tr>
<tr>
<td><code>wrap-ansi</code></td>
<td>^7.0.0</td>
<td>Text wrapping</td>
<td>Preserves ANSI styling</td>
</tr>
<tr>
<td><code>cli-spinners</code></td>
<td>^2.7.0</td>
<td>Loading animations</td>
<td>Custom spinner definitions</td>
</tr>
<tr>
<td>åŒ…</td>
<td>ç‰ˆæœ¬*</td>
<td>ç”¨é€”</td>
<td>æŠ€æœ¯æ´å¯Ÿ</td>
</tr>
<tr>
<td>â€”</td>
<td>â€”</td>
<td>â€”</td>
<td>â€”</td>
</tr>
<tr>
<td><code>ink</code></td>
<td>^3.2.0</td>
<td>CLIçš„Reactæ¸²æŸ“å™¨</td>
<td>è‡ªå®šä¹‰åè°ƒå™¨å®ç°</td>
</tr>
<tr>
<td><code>react</code></td>
<td>^18.2.0</td>
<td>UIç»„ä»¶æ¨¡å‹</td>
<td>å¯ç”¨å®Œæ•´å¹¶å‘åŠŸèƒ½</td>
</tr>
<tr>
<td><code>yoga-layout-prebuilt</code></td>
<td>^1.10.0</td>
<td>Flexboxå¸ƒå±€</td>
<td>WebAssemblyæå‡æ€§èƒ½</td>
</tr>
<tr>
<td><code>commander</code></td>
<td>^9.0.0</td>
<td>å‚æ•°è§£æ</td>
<td>æ‰©å±•è‡ªå®šä¹‰é€‰é¡¹ç±»å‹</td>
</tr>
<tr>
<td><code>chalk</code></td>
<td>^4.1.2</td>
<td>ç»ˆç«¯æ ·å¼</td>
<td>ä½¿ç”¨æ¨¡æ¿å­—é¢é‡API</td>
</tr>
<tr>
<td><code>cli-highlight</code></td>
<td>^2.1.11</td>
<td>è¯­æ³•é«˜äº®</td>
<td>æ·»åŠ è‡ªå®šä¹‰è¯­è¨€å®šä¹‰</td>
</tr>
<tr>
<td><code>strip-ansi</code></td>
<td>^6.0.1</td>
<td>ANSIä»£ç ç§»é™¤</td>
<td>ç”¨äºæ–‡æœ¬æµ‹é‡</td>
</tr>
<tr>
<td><code>string-width</code></td>
<td>^4.2.3</td>
<td>Unicodeå®½åº¦è®¡ç®—</td>
<td>å®Œæ•´emojiæ”¯æŒ</td>
</tr>
<tr>
<td><code>wrap-ansi</code></td>
<td>^7.0.0</td>
<td>æ–‡æœ¬æ¢è¡Œ</td>
<td>ä¿æŒANSIæ ·å¼</td>
</tr>
<tr>
<td><code>cli-spinners</code></td>
<td>^2.7.0</td>
<td>åŠ è½½åŠ¨ç”»</td>
<td>è‡ªå®šä¹‰spinnerå®šä¹‰</td>
</tr>
</tbody></table>
<p><em>Versions inferred from ecosystem compatibility analysis</em><br><em>ç‰ˆæœ¬ä»ç”Ÿæ€ç³»ç»Ÿå…¼å®¹æ€§åˆ†ææ¨æ–­</em></p>
<p><strong>Performance Optimization Pattern</strong>:<br><strong>æ€§èƒ½ä¼˜åŒ–æ¨¡å¼</strong>ï¼š</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// String width calculation with caching</span>
<span class="token comment">// å¸¦ç¼“å­˜çš„å­—ç¬¦ä¸²å®½åº¦è®¡ç®—</span>
<span class="token keyword">const</span> widthCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getCachedWidth</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>widthCache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    widthCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token function">stringWidth</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> widthCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="LLM-Integration-Stack-5-packages"><a href="#LLM-Integration-Stack-5-packages" class="headerlink" title="LLM Integration Stack (5+ packages)"></a>LLM Integration Stack (5+ packages)</h3><h3 id="LLMé›†æˆå †æ ˆï¼ˆ5-ä¸ªåŒ…ï¼‰"><a href="#LLMé›†æˆå †æ ˆï¼ˆ5-ä¸ªåŒ…ï¼‰" class="headerlink" title="LLMé›†æˆå †æ ˆï¼ˆ5+ä¸ªåŒ…ï¼‰"></a>LLMé›†æˆå †æ ˆï¼ˆ5+ä¸ªåŒ…ï¼‰</h3><p>The LLM integration reveals a multi-provider strategy with sophisticated fallback:<br>LLMé›†æˆæ­ç¤ºäº†ä¸€ä¸ªå…·æœ‰å¤æ‚æ•…éšœè½¬ç§»çš„å¤šä¾›åº”å•†ç­–ç•¥ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">â”Œâ”€ Provider Selection Logic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Check API key availability                          â”‚
â”‚ 2. Evaluate rate limits across providers               â”‚
â”‚ 3. Consider feature requirements (streaming, tools)    â”‚
â”‚ 4. Apply cost optimization rules                       â”‚
â”‚ 5. Fallback chain: Anthropic â†’ Bedrock â†’ Vertex        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€ ä¾›åº”å•†é€‰æ‹©é€»è¾‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ£€æŸ¥APIå¯†é’¥å¯ç”¨æ€§                            â”‚
â”‚ 2. è¯„ä¼°è·¨ä¾›åº”å•†é€Ÿç‡é™åˆ¶                           â”‚
â”‚ 3. è€ƒè™‘åŠŸèƒ½è¦æ±‚ï¼ˆæµå¼ä¼ è¾“ï¼Œå·¥å…·ï¼‰                   â”‚
â”‚ 4. åº”ç”¨æˆæœ¬ä¼˜åŒ–è§„åˆ™                              â”‚
â”‚ 5. æ•…éšœè½¬ç§»é“¾ï¼šAnthropic â†’ Bedrock â†’ Vertex     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>AWS SDK Components</strong> (inferred from @aws-sdk/* patterns):<br><strong>AWS SDKç»„ä»¶</strong>ï¼ˆä»@aws-sdk/*æ¨¡å¼æ¨æ–­ï¼‰ï¼š</p>
<ul>
<li><code>@aws-sdk/client-bedrock-runtime</code>: Primary Bedrock client</li>
<li><code>@aws-sdk/signature-v4</code>: Request signing</li>
<li><code>@aws-sdk/middleware-retry</code>: Intelligent retry logic</li>
<li><code>@aws-sdk/smithy-client</code>: Protocol implementation</li>
<li><code>@aws-sdk/types</code>: Shared type definitions</li>
<li><code>@aws-sdk/client-bedrock-runtime</code>: ä¸»è¦Bedrockå®¢æˆ·ç«¯</li>
<li><code>@aws-sdk/signature-v4</code>: è¯·æ±‚ç­¾å</li>
<li><code>@aws-sdk/middleware-retry</code>: æ™ºèƒ½é‡è¯•é€»è¾‘</li>
<li><code>@aws-sdk/smithy-client</code>: åè®®å®ç°</li>
<li><code>@aws-sdk/types</code>: å…±äº«ç±»å‹å®šä¹‰</li>
</ul>
<h3 id="Data-Processing-amp-Validation-8-packages"><a href="#Data-Processing-amp-Validation-8-packages" class="headerlink" title="Data Processing &amp; Validation (8+ packages)"></a>Data Processing &amp; Validation (8+ packages)</h3><h3 id="æ•°æ®å¤„ç†ä¸éªŒè¯ï¼ˆ8-ä¸ªåŒ…ï¼‰"><a href="#æ•°æ®å¤„ç†ä¸éªŒè¯ï¼ˆ8-ä¸ªåŒ…ï¼‰" class="headerlink" title="æ•°æ®å¤„ç†ä¸éªŒè¯ï¼ˆ8+ä¸ªåŒ…ï¼‰"></a>æ•°æ®å¤„ç†ä¸éªŒè¯ï¼ˆ8+ä¸ªåŒ…ï¼‰</h3><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token comment">// Zod schema compilation pattern (inferred)</span>
<span class="token comment">// Zodæ¨¡å¼ç¼–è¯‘æ¨¡å¼ï¼ˆæ¨æ–­ï¼‰</span>
<span class="token keyword">const</span> <span class="token constant">COMPILED_SCHEMAS</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getCompiledSchema</span><span class="token punctuation">(</span>schema<span class="token operator">:</span> ZodSchema<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> schema<span class="token punctuation">.</span>_def<span class="token punctuation">.</span>shape<span class="token punctuation">;</span> <span class="token comment">// Simplified</span>
  <span class="token comment">// ç®€åŒ–ç‰ˆ</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">COMPILED_SCHEMAS</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token constant">COMPILED_SCHEMAS</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
      validator<span class="token operator">:</span> schema<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>schema<span class="token punctuation">)</span><span class="token punctuation">,</span>
      jsonSchema<span class="token operator">:</span> <span class="token function">zodToJsonSchema</span><span class="token punctuation">(</span>schema<span class="token punctuation">)</span><span class="token punctuation">,</span>
      tsType<span class="token operator">:</span> <span class="token function">zodToTs</span><span class="token punctuation">(</span>schema<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token constant">COMPILED_SCHEMAS</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>Transformation Pipeline Performance</strong>:<br><strong>è½¬æ¢ç®¡é“æ€§èƒ½</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Library</th>
<th>Performance</th>
<th>Memory</th>
</tr>
</thead>
<tbody><tr>
<td>Markdownâ†’AST</td>
<td>marked</td>
<td>O(n)</td>
<td>Streaming capable</td>
</tr>
<tr>
<td>HTMLâ†’Markdown</td>
<td>turndown</td>
<td>O(n)</td>
<td>DOM size limited</td>
</tr>
<tr>
<td>Image resize</td>
<td>sharp</td>
<td>O(1)*</td>
<td>Native memory</td>
</tr>
<tr>
<td>JSON validation</td>
<td>zod</td>
<td>O(n)</td>
<td>Fail-fast</td>
</tr>
<tr>
<td>Text diff</td>
<td>diff</td>
<td>O(nÂ²)</td>
<td>Myers algorithm</td>
</tr>
<tr>
<td>æ“ä½œ</td>
<td>åº“</td>
<td>æ€§èƒ½</td>
<td>å†…å­˜</td>
</tr>
<tr>
<td>â€”</td>
<td>â€”</td>
<td>â€”</td>
<td>â€”</td>
</tr>
<tr>
<td>Markdownâ†’AST</td>
<td>marked</td>
<td>O(n)</td>
<td>æ”¯æŒæµå¼å¤„ç†</td>
</tr>
<tr>
<td>HTMLâ†’Markdown</td>
<td>turndown</td>
<td>O(n)</td>
<td>DOMå¤§å°é™åˆ¶</td>
</tr>
<tr>
<td>å›¾åƒè°ƒæ•´å¤§å°</td>
<td>sharp</td>
<td>O(1)*</td>
<td>åŸç”Ÿå†…å­˜</td>
</tr>
<tr>
<td>JSONéªŒè¯</td>
<td>zod</td>
<td>O(n)</td>
<td>å¿«é€Ÿå¤±è´¥</td>
</tr>
<tr>
<td>æ–‡æœ¬å·®å¼‚</td>
<td>diff</td>
<td>O(nÂ²)</td>
<td>Myersç®—æ³•</td>
</tr>
</tbody></table>
<ul>
<li>With hardware acceleration</li>
<li>å¸¦ç¡¬ä»¶åŠ é€Ÿ</li>
</ul>
<h3 id="File-System-Intelligence-6-packages"><a href="#File-System-Intelligence-6-packages" class="headerlink" title="File System Intelligence (6+ packages)"></a>File System Intelligence (6+ packages)</h3><h3 id="æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½ï¼ˆ6-ä¸ªåŒ…ï¼‰"><a href="#æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½ï¼ˆ6-ä¸ªåŒ…ï¼‰" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½ï¼ˆ6+ä¸ªåŒ…ï¼‰"></a>æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½ï¼ˆ6+ä¸ªåŒ…ï¼‰</h3><p>The file system dependencies implement a sophisticated filtering pipeline:<br>æ–‡ä»¶ç³»ç»Ÿä¾èµ–é¡¹å®ç°äº†ä¸€ä¸ªå¤æ‚çš„è¿‡æ»¤ç®¡é“ï¼š</p>
<pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> TD
    UserPattern<span class="token text string">[User Pattern]</span> <span class="token arrow operator">--></span> GlobParser<span class="token text string">&#123;glob&#125;</span>
    GlobParser <span class="token arrow operator">--></span> Picomatch<span class="token text string">&#123;picomatch&#125;</span>
    GlobParser <span class="token arrow operator">--></span> Minimatch<span class="token text string">&#123;minimatch&#125;</span>

    Picomatch <span class="token arrow operator">--></span> FileList<span class="token text string">[File List]</span>
    Minimatch <span class="token arrow operator">--></span> FileList

    FileList <span class="token arrow operator">--></span> IgnoreFilter<span class="token text string">&#123;ignore&#125;</span>
    IgnoreFilter <span class="token arrow operator">--></span> GitignoreRules<span class="token text string">[.gitignore Rules]</span>
    IgnoreFilter <span class="token arrow operator">--></span> CustomRules<span class="token text string">[Custom Rules]</span>

    IgnoreFilter <span class="token arrow operator">--></span> FinalList<span class="token text string">[Filtered Results]</span>

    UserPattern<span class="token text string">[ç”¨æˆ·æ¨¡å¼]</span> <span class="token arrow operator">--></span> GlobParser<span class="token text string">&#123;glob&#125;</span>
    GlobParser <span class="token arrow operator">--></span> Picomatch<span class="token text string">&#123;picomatch&#125;</span>
    GlobParser <span class="token arrow operator">--></span> Minimatch<span class="token text string">&#123;minimatch&#125;</span>

    Picomatch <span class="token arrow operator">--></span> FileList<span class="token text string">[æ–‡ä»¶åˆ—è¡¨]</span>
    Minimatch <span class="token arrow operator">--></span> FileList

    FileList <span class="token arrow operator">--></span> IgnoreFilter<span class="token text string">&#123;ignore&#125;</span>
    IgnoreFilter <span class="token arrow operator">--></span> GitignoreRules<span class="token text string">[.gitignoreè§„åˆ™]</span>
    IgnoreFilter <span class="token arrow operator">--></span> CustomRules<span class="token text string">[è‡ªå®šä¹‰è§„åˆ™]</span>

    IgnoreFilter <span class="token arrow operator">--></span> FinalList<span class="token text string">[è¿‡æ»¤ç»“æœ]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2025/10/23/claude-code-ji-chu-jia-gou/3.svg" class="">
<p><strong>Pattern Matching Optimization</strong>:<br><strong>æ¨¡å¼åŒ¹é…ä¼˜åŒ–</strong>ï¼š</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// Compiled pattern caching (inferred)</span>
<span class="token comment">// ç¼–è¯‘æ¨¡å¼ç¼“å­˜ï¼ˆæ¨æ–­ï¼‰</span>
<span class="token keyword">class</span> <span class="token class-name">PatternMatcher</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">private</span> compiledPatterns <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LRUCache</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">match</span><span class="token punctuation">(</span><span class="token parameter">pattern<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> compiled <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>compiledPatterns<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>compiled<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      compiled <span class="token operator">=</span> <span class="token function">picomatch</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">bash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">dot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">nobrace</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>compiledPatterns<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> compiled<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token function">compiled</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="Telemetry-amp-Observability-4-packages"><a href="#Telemetry-amp-Observability-4-packages" class="headerlink" title="Telemetry &amp; Observability (4+ packages)"></a>Telemetry &amp; Observability (4+ packages)</h3><h3 id="é¥æµ‹ä¸å¯è§‚å¯Ÿæ€§ï¼ˆ4-ä¸ªåŒ…ï¼‰"><a href="#é¥æµ‹ä¸å¯è§‚å¯Ÿæ€§ï¼ˆ4-ä¸ªåŒ…ï¼‰" class="headerlink" title="é¥æµ‹ä¸å¯è§‚å¯Ÿæ€§ï¼ˆ4+ä¸ªåŒ…ï¼‰"></a>é¥æµ‹ä¸å¯è§‚å¯Ÿæ€§ï¼ˆ4+ä¸ªåŒ…ï¼‰</h3><p>The telemetry stack implements defense-in-depth monitoring:<br>é¥æµ‹å †æ ˆå®ç°äº†æ·±åº¦é˜²å¾¡ç›‘æ§ï¼š</p>
<p><strong>Sentry Integration Layers</strong>:<br><strong>Sentryé›†æˆå±‚</strong>ï¼š</p>
<ol>
<li><strong>Error Boundary</strong>: React error boundaries for UI crashes</li>
<li><strong>Global Handler</strong>: Process-level uncaught exceptions</li>
<li><strong>Promise Rejection</strong>: Unhandled promise tracking</li>
<li><strong>ANR Detection</strong>: Custom worker-thread monitoring</li>
<li><strong>Performance</strong>: Transaction and span tracking</li>
<li><strong>é”™è¯¯è¾¹ç•Œ</strong>: ç”¨äºUIå´©æºƒçš„Reacté”™è¯¯è¾¹ç•Œ</li>
<li><strong>å…¨å±€å¤„ç†å™¨</strong>: è¿›ç¨‹çº§æœªæ•è·å¼‚å¸¸</li>
<li><strong>Promiseæ‹’ç»</strong>: æœªå¤„ç†çš„Promiseè·Ÿè¸ª</li>
<li><strong>ANRæ£€æµ‹</strong>: è‡ªå®šä¹‰å·¥ä½œçº¿ç¨‹ç›‘æ§</li>
<li><strong>æ€§èƒ½</strong>: äº‹åŠ¡å’Œspanè·Ÿè¸ª</li>
</ol>
<p><strong>OpenTelemetry Instrumentation</strong>:<br><strong>OpenTelemetryä»ªè¡¨åŒ–</strong>ï¼š</p>
<pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token comment">// Custom span creation for tool execution</span>
<span class="token comment">// å·¥å…·æ‰§è¡Œçš„è‡ªå®šä¹‰spanåˆ›å»º</span>
<span class="token keyword">function</span> <span class="token function">instrumentToolExecution</span><span class="token punctuation">(</span>tool<span class="token operator">:</span> Tool<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> span <span class="token operator">=</span> tracer<span class="token punctuation">.</span><span class="token function">startSpan</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">tool.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>tool<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
      attributes<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token string-property property">'tool.name'</span><span class="token operator">:</span> tool<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
        <span class="token string-property property">'tool.readonly'</span><span class="token operator">:</span> tool<span class="token punctuation">.</span>isReadOnly<span class="token punctuation">,</span>
        <span class="token string-property property">'tool.input.size'</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">tool</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>
      span<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>Statsig Feature Flag Patterns</strong>:<br><strong>StatsigåŠŸèƒ½æ ‡å¿—æ¨¡å¼</strong>ï¼š</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// Gradual rollout configuration (inferred)</span>
<span class="token comment">// æ¸è¿›å¼å‘å¸ƒé…ç½®ï¼ˆæ¨æ–­ï¼‰</span>
<span class="token keyword">const</span> <span class="token constant">FEATURE_FLAGS</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token string-property property">'unified_read_tool'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">rollout</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
    <span class="token literal-property property">overrides</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">internal</span><span class="token operator">:</span> <span class="token number">1.0</span> <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token string-property property">'parallel_tool_execution'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">rollout</span><span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">conditions</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'user_tier'</span><span class="token punctuation">,</span> <span class="token literal-property property">operator</span><span class="token operator">:</span> <span class="token string">'in'</span><span class="token punctuation">,</span> <span class="token literal-property property">values</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pro'</span><span class="token punctuation">,</span> <span class="token string">'enterprise'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token string-property property">'sandbox_bash_default'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">rollout</span><span class="token operator">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sticky</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// Consistent per user</span>
    <span class="token comment">// æ¯ä¸ªç”¨æˆ·ä¿æŒä¸€è‡´</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Hidden-Gems-The-Specialized-Dependencies"><a href="#Hidden-Gems-The-Specialized-Dependencies" class="headerlink" title="Hidden Gems: The Specialized Dependencies"></a>Hidden Gems: The Specialized Dependencies</h2><h2 id="éšè—çš„å®çŸ³ï¼šä¸“ä¸šåŒ–ä¾èµ–é¡¹"><a href="#éšè—çš„å®çŸ³ï¼šä¸“ä¸šåŒ–ä¾èµ–é¡¹" class="headerlink" title="éšè—çš„å®çŸ³ï¼šä¸“ä¸šåŒ–ä¾èµ–é¡¹"></a>éšè—çš„å®çŸ³ï¼šä¸“ä¸šåŒ–ä¾èµ–é¡¹</h2><h3 id="XML-Parsing-for-LLM-Communication"><a href="#XML-Parsing-for-LLM-Communication" class="headerlink" title="XML Parsing for LLM Communication"></a>XML Parsing for LLM Communication</h3><h3 id="ç”¨äºLLMé€šä¿¡çš„XMLè§£æ"><a href="#ç”¨äºLLMé€šä¿¡çš„XMLè§£æ" class="headerlink" title="ç”¨äºLLMé€šä¿¡çš„XMLè§£æ"></a>ç”¨äºLLMé€šä¿¡çš„XMLè§£æ</h3><p>The embedded <code>fast-xml-parser</code> appears to be customized for LLM response parsing:<br>åµŒå…¥çš„<code>fast-xml-parser</code>ä¼¼ä¹æ˜¯ä¸ºLLMå“åº”è§£æè€Œå®šåˆ¶çš„ï¼š</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// Inferred XML parser configuration</span>
<span class="token comment">// æ¨æ–­çš„XMLè§£æå™¨é…ç½®</span>
<span class="token keyword">const</span> llmXmlParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLParser</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token literal-property property">ignoreAttributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parseTagValue</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Keep as strings</span>
  <span class="token comment">// ä¿æŒä¸ºå­—ç¬¦ä¸²</span>
  <span class="token literal-property property">trimValues</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parseTrueNumberOnly</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

  <span class="token comment">// Custom tag processors</span>
  <span class="token comment">// è‡ªå®šä¹‰æ ‡ç­¾å¤„ç†å™¨</span>
  <span class="token function-variable function">tagValueProcessor</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">tagName<span class="token punctuation">,</span> tagValue</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tagName <span class="token operator">===</span> <span class="token string">'tool_input'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// Parse JSON content within XML</span>
      <span class="token comment">// è§£æXMLä¸­çš„JSONå†…å®¹</span>
      <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>tagValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token string">'Invalid JSON in tool_input'</span><span class="token punctuation">,</span> <span class="token literal-property property">raw</span><span class="token operator">:</span> tagValue <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> tagValue<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="The-plist-Parser-Mystery"><a href="#The-plist-Parser-Mystery" class="headerlink" title="The plist Parser Mystery"></a>The plist Parser Mystery</h3><h3 id="plistè§£æå™¨ä¹‹è°œ"><a href="#plistè§£æå™¨ä¹‹è°œ" class="headerlink" title="plistè§£æå™¨ä¹‹è°œ"></a>plistè§£æå™¨ä¹‹è°œ</h3><p>The inclusion of <code>plist</code> (Apple Property List parser) suggests macOS-specific optimizations:<br><code>plist</code>ï¼ˆAppleå±æ€§åˆ—è¡¨è§£æå™¨ï¼‰çš„åŒ…å«æš—ç¤ºäº†macOSç‰¹å®šçš„ä¼˜åŒ–ï¼š</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// Possible use cases (inferred)</span>
<span class="token comment">// å¯èƒ½çš„ç”¨ä¾‹ï¼ˆæ¨æ–­ï¼‰</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loadMacOSConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token keyword">await</span> plist<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'~/Library/Preferences/com.anthropic.claude-code.plist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">apiKeys</span><span class="token operator">:</span> config<span class="token punctuation">.</span>APIKeys<span class="token punctuation">,</span> <span class="token comment">// Stored in Keychain reference</span>
    <span class="token comment">// å­˜å‚¨åœ¨é’¥åŒ™ä¸²å¼•ç”¨ä¸­</span>
    <span class="token literal-property property">sandboxProfiles</span><span class="token operator">:</span> config<span class="token punctuation">.</span>SandboxProfiles<span class="token punctuation">,</span>
    <span class="token literal-property property">ideIntegrations</span><span class="token operator">:</span> config<span class="token punctuation">.</span>IDEIntegrations
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="Cross-Platform-Process-Spawning"><a href="#Cross-Platform-Process-Spawning" class="headerlink" title="Cross-Platform Process Spawning"></a>Cross-Platform Process Spawning</h3><h3 id="è·¨å¹³å°è¿›ç¨‹ç”Ÿæˆ"><a href="#è·¨å¹³å°è¿›ç¨‹ç”Ÿæˆ" class="headerlink" title="è·¨å¹³å°è¿›ç¨‹ç”Ÿæˆ"></a>è·¨å¹³å°è¿›ç¨‹ç”Ÿæˆ</h3><p>The <code>cross-spawn</code> dependency handles platform differences:<br><code>cross-spawn</code>ä¾èµ–é¡¹å¤„ç†å¹³å°å·®å¼‚ï¼š</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// MCP server launching pattern</span>
<span class="token comment">// MCPæœåŠ¡å™¨å¯åŠ¨æ¨¡å¼</span>
<span class="token keyword">function</span> <span class="token function">launchMCPServer</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> spawn <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cross-spawn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token function">spawn</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>command<span class="token punctuation">,</span> config<span class="token punctuation">.</span>args<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">stdio</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pipe'</span><span class="token punctuation">,</span> <span class="token string">'pipe'</span><span class="token punctuation">,</span> <span class="token string">'pipe'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token operator">...</span>process<span class="token punctuation">.</span>env<span class="token punctuation">,</span>
      <span class="token constant">MCP_VERSION</span><span class="token operator">:</span> <span class="token string">'1.0'</span><span class="token punctuation">,</span>
      <span class="token comment">// Windows: Handles .cmd/.bat properly</span>
      <span class="token comment">// Windowsï¼šæ­£ç¡®å¤„ç†.cmd/.bat</span>
      <span class="token comment">// Unix: Preserves shebangs</span>
      <span class="token comment">// Unixï¼šä¿ç•™shebang</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">shell</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Security: avoid shell injection</span>
    <span class="token comment">// å®‰å…¨ï¼šé¿å…shellæ³¨å…¥</span>
    <span class="token literal-property property">windowsHide</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// No console window on Windows</span>
    <span class="token comment">// Windowsä¸Šä¸æ˜¾ç¤ºæ§åˆ¶å°çª—å£</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MCPStdioTransport</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Dependency-Security-Considerations"><a href="#Dependency-Security-Considerations" class="headerlink" title="Dependency Security Considerations"></a>Dependency Security Considerations</h2><h2 id="ä¾èµ–é¡¹å®‰å…¨è€ƒè™‘"><a href="#ä¾èµ–é¡¹å®‰å…¨è€ƒè™‘" class="headerlink" title="ä¾èµ–é¡¹å®‰å…¨è€ƒè™‘"></a>ä¾èµ–é¡¹å®‰å…¨è€ƒè™‘</h2><p>Based on the dependency analysis, several security patterns emerge:<br>åŸºäºä¾èµ–é¡¹åˆ†æï¼Œå‡ºç°äº†å‡ ç§å®‰å…¨æ¨¡å¼ï¼š</p>
<p><strong>1. Input Validation Layer</strong>:<br><strong>1. è¾“å…¥éªŒè¯å±‚</strong>ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">User Input â†’ Zod Schema â†’ Validated Data â†’ Tool Execution
     â†“
  Rejected
ç”¨æˆ·è¾“å…¥ â†’ Zodæ¨¡å¼ â†’ éªŒè¯æ•°æ® â†’ å·¥å…·æ‰§è¡Œ
     â†“
   æ‹’ç»
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>2. Sandboxing Dependencies</strong>:<br><strong>2. æ²™ç›’åŒ–ä¾èµ–é¡¹</strong>ï¼š</p>
<ul>
<li>No <code>child_process</code> direct usage (uses <code>cross-spawn</code>)</li>
<li>No <code>eval</code> usage (except controlled worker threads)</li>
<li>No dynamic <code>require</code> patterns detected</li>
<li>æ²¡æœ‰ç›´æ¥ä½¿ç”¨<code>child_process</code>ï¼ˆä½¿ç”¨<code>cross-spawn</code>ï¼‰</li>
<li>æ²¡æœ‰ä½¿ç”¨<code>eval</code>ï¼ˆé™¤äº†å—æ§çš„å·¥ä½œçº¿ç¨‹ï¼‰</li>
<li>æ²¡æœ‰æ£€æµ‹åˆ°åŠ¨æ€<code>require</code>æ¨¡å¼</li>
</ul>
<p><strong>3. Secret Management</strong>:<br><strong>3. ç§˜å¯†ç®¡ç†</strong>ï¼š</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// Inferred pattern from absence of secret-storage deps</span>
<span class="token comment">// ä»ç¼ºå°‘ç§˜å¯†å­˜å‚¨ä¾èµ–é¡¹æ¨æ–­çš„æ¨¡å¼</span>
<span class="token keyword">class</span> <span class="token class-name">SecretManager</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">async</span> <span class="token function">getAPIKey</span><span class="token punctuation">(</span><span class="token parameter">provider</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>platform <span class="token operator">===</span> <span class="token string">'darwin'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// Use native Keychain via N-API</span>
      <span class="token comment">// é€šè¿‡N-APIä½¿ç”¨åŸç”Ÿé’¥åŒ™ä¸²</span>
      <span class="token keyword">return</span> <span class="token keyword">await</span> keychain<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token string">'claude-code'</span><span class="token punctuation">,</span> provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// Fallback to environment variables</span>
      <span class="token comment">// å›é€€åˆ°ç¯å¢ƒå˜é‡</span>
      <span class="token keyword">return</span> process<span class="token punctuation">.</span>env<span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>provider<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">_API_KEY</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Performance-Implications-of-Dependency-Choices"><a href="#Performance-Implications-of-Dependency-Choices" class="headerlink" title="Performance Implications of Dependency Choices"></a>Performance Implications of Dependency Choices</h2><h2 id="ä¾èµ–é¡¹é€‰æ‹©çš„æ€§èƒ½å½±å“"><a href="#ä¾èµ–é¡¹é€‰æ‹©çš„æ€§èƒ½å½±å“" class="headerlink" title="ä¾èµ–é¡¹é€‰æ‹©çš„æ€§èƒ½å½±å“"></a>ä¾èµ–é¡¹é€‰æ‹©çš„æ€§èƒ½å½±å“</h2><h3 id="Memory-Management-Strategy"><a href="#Memory-Management-Strategy" class="headerlink" title="Memory Management Strategy"></a>Memory Management Strategy</h3><h3 id="å†…å­˜ç®¡ç†ç­–ç•¥"><a href="#å†…å­˜ç®¡ç†ç­–ç•¥" class="headerlink" title="å†…å­˜ç®¡ç†ç­–ç•¥"></a>å†…å­˜ç®¡ç†ç­–ç•¥</h3><p>The dependency selection reveals a careful memory management approach:<br>ä¾èµ–é¡¹é€‰æ‹©æ­ç¤ºäº†ä»”ç»†çš„å†…å­˜ç®¡ç†æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Strategy</th>
<th>Implementation</th>
</tr>
</thead>
<tbody><tr>
<td>File Reading</td>
<td>Streaming</td>
<td><code>glob.stream</code>, chunked reads</td>
</tr>
<tr>
<td>Image Processing</td>
<td>Native</td>
<td><code>sharp</code> with libvips (off-heap)</td>
</tr>
<tr>
<td>XML Parsing</td>
<td>SAX-style</td>
<td>Event-based, constant memory</td>
</tr>
<tr>
<td>Pattern Matching</td>
<td>Compiled</td>
<td>Pre-compiled regex patterns</td>
</tr>
<tr>
<td>UI Rendering</td>
<td>Virtual DOM</td>
<td>Minimal terminal updates</td>
</tr>
<tr>
<td>ç»„ä»¶</td>
<td>ç­–ç•¥</td>
<td>å®ç°</td>
</tr>
<tr>
<td>â€”</td>
<td>â€”</td>
<td>â€”</td>
</tr>
<tr>
<td>æ–‡ä»¶è¯»å–</td>
<td>æµå¼</td>
<td><code>glob.stream</code>ï¼Œåˆ†å—è¯»å–</td>
</tr>
<tr>
<td>å›¾åƒå¤„ç†</td>
<td>åŸç”Ÿ</td>
<td><code>sharp</code>ä¸libvipsï¼ˆå †å¤–ï¼‰</td>
</tr>
<tr>
<td>XMLè§£æ</td>
<td>SAXé£æ ¼</td>
<td>åŸºäºäº‹ä»¶ï¼Œå¸¸é‡å†…å­˜</td>
</tr>
<tr>
<td>æ¨¡å¼åŒ¹é…</td>
<td>ç¼–è¯‘</td>
<td>é¢„ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼</td>
</tr>
<tr>
<td>UIæ¸²æŸ“</td>
<td>è™šæ‹ŸDOM</td>
<td>æœ€å°ç»ˆç«¯æ›´æ–°</td>
</tr>
</tbody></table>
<h3 id="Startup-Time-Optimization"><a href="#Startup-Time-Optimization" class="headerlink" title="Startup Time Optimization"></a>Startup Time Optimization</h3><h3 id="å¯åŠ¨æ—¶é—´ä¼˜åŒ–"><a href="#å¯åŠ¨æ—¶é—´ä¼˜åŒ–" class="headerlink" title="å¯åŠ¨æ—¶é—´ä¼˜åŒ–"></a>å¯åŠ¨æ—¶é—´ä¼˜åŒ–</h3><p>Dependencies are structured for lazy loading:<br>ä¾èµ–é¡¹ç»“æ„åŒ–ç”¨äºå»¶è¿ŸåŠ è½½ï¼š</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// Inferred lazy loading pattern</span>
<span class="token comment">// æ¨æ–­çš„å»¶è¿ŸåŠ è½½æ¨¡å¼</span>
<span class="token keyword">const</span> <span class="token constant">LAZY_DEPS</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token string-property property">'sharp'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'sharp'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">'@aws-sdk/client-bedrock-runtime'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@aws-sdk/client-bedrock-runtime'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">'google-auth-library'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'google-auth-library'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getLazyDep</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">LAZY_DEPS</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span>_cached<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token constant">LAZY_DEPS</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span>_cached <span class="token operator">=</span> <span class="token constant">LAZY_DEPS</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token constant">LAZY_DEPS</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span>_cached<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<p><em>This dependency analysis is based on decompilation and reverse engineering. Actual implementation details may vary. The patterns and insights presented represent inferred architectural decisions based on observable behavior and common practices in the Node.js ecosystem.</em><br><em>æ­¤ä¾èµ–é¡¹åˆ†æåŸºäºåç¼–è¯‘å’Œé€†å‘å·¥ç¨‹ã€‚å®é™…å®ç°ç»†èŠ‚å¯èƒ½æœ‰æ‰€ä¸åŒã€‚æ‰€å‘ˆç°çš„æ¨¡å¼å’Œæ´å¯Ÿä»£è¡¨äº†åŸºäºå¯è§‚å¯Ÿè¡Œä¸ºå’ŒNode.jsç”Ÿæ€ç³»ç»Ÿä¸­å¸¸è§å®è·µæ¨æ–­çš„æ¶æ„å†³ç­–ã€‚</em></p>
<h1 id="æ–‡ä»¶æ€»ç»“"><a href="#æ–‡ä»¶æ€»ç»“" class="headerlink" title="æ–‡ä»¶æ€»ç»“"></a>æ–‡ä»¶æ€»ç»“</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>æœ¬æ–‡æ¡£æ·±å…¥åˆ†æäº†Claude Codeçš„ä¾èµ–æ¶æ„ï¼Œæ­ç¤ºäº†å…¶é«˜æ€§èƒ½å’Œå¯é æ€§èƒŒåçš„æŠ€æœ¯å†³ç­–ã€‚é€šè¿‡åç¼–è¯‘å’Œé€†å‘å·¥ç¨‹åˆ†æï¼Œæ–‡æ¡£å±•ç°äº†Claude Codeå¦‚ä½•é€šè¿‡ç²¾å¿ƒé€‰æ‹©çš„ä¾èµ–é¡¹æ¥å®ç°å…¶å“è¶Šçš„åŠŸèƒ½ã€‚</p>
<h2 id="æ ¸å¿ƒæ¶æ„ç‰¹ç‚¹"><a href="#æ ¸å¿ƒæ¶æ„ç‰¹ç‚¹" class="headerlink" title="æ ¸å¿ƒæ¶æ„ç‰¹ç‚¹"></a>æ ¸å¿ƒæ¶æ„ç‰¹ç‚¹</h2><h3 id="1-ç»ˆç«¯Reactæ¶æ„"><a href="#1-ç»ˆç«¯Reactæ¶æ„" class="headerlink" title="1. ç»ˆç«¯Reactæ¶æ„"></a>1. ç»ˆç«¯Reactæ¶æ„</h3><ul>
<li><strong>æŠ€æœ¯æ ˆ</strong>ï¼šReact 18.2.0 + Ink 3.2.0 + Yoga Layout WebAssembly</li>
<li><strong>åˆ›æ–°ç‚¹</strong>ï¼šå°†Reactçš„è™šæ‹ŸDOMå’Œåè°ƒç®—æ³•å¼•å…¥ç»ˆç«¯ç¯å¢ƒ</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼š<ul>
<li>å£°æ˜å¼UIçŠ¶æ€ç®¡ç†</li>
<li>äºšæ¯«ç§’çº§å¸ƒå±€è®¡ç®—</li>
<li>é«˜æ•ˆçš„ç»ˆç«¯å­—ç¬¦ä½ç½®ä¼˜åŒ–</li>
<li>æ”¯æŒå¤æ‚UIçŠ¶æ€ï¼ˆæƒé™å¯¹è¯æ¡†ã€è¿›åº¦æŒ‡ç¤ºå™¨ã€å¹¶å‘å·¥å…·æ‰§è¡Œï¼‰</li>
</ul>
</li>
</ul>
<h3 id="2-æµå¼è§£æå™¨æ¶æ„"><a href="#2-æµå¼è§£æå™¨æ¶æ„" class="headerlink" title="2. æµå¼è§£æå™¨æ¶æ„"></a>2. æµå¼è§£æå™¨æ¶æ„</h3><ul>
<li><strong>è‡ªå®šä¹‰è§£æå™¨</strong>ï¼š<ul>
<li>Shellè§£æå™¨ï¼šæ”¯æŒJSONå¯¹è±¡åµŒå…¥å’Œé€’å½’å‘½ä»¤æ›¿æ¢</li>
<li>XMLè§£æå™¨ï¼šé’ˆå¯¹LLMå“åº”ä¼˜åŒ–çš„æµå¼è§£æ</li>
</ul>
</li>
<li><strong>æ ¸å¿ƒåˆ›æ–°</strong>ï¼šé€šè¿‡å“¨å…µå­—ç¬¦ä¸²æœºåˆ¶å®ç°å¤æ‚é…ç½®å¯¹è±¡çš„shellå‘½ä»¤ä¼ é€’</li>
</ul>
<h3 id="3-å¤šå¹³å°LLMæŠ½è±¡å±‚"><a href="#3-å¤šå¹³å°LLMæŠ½è±¡å±‚" class="headerlink" title="3. å¤šå¹³å°LLMæŠ½è±¡å±‚"></a>3. å¤šå¹³å°LLMæŠ½è±¡å±‚</h3><ul>
<li><strong>æ”¯æŒçš„æä¾›å•†</strong>ï¼šAnthropicã€AWS Bedrockã€Google Vertex AI</li>
<li><strong>è®¾è®¡æ¨¡å¼</strong>ï¼šå·¥å‚æ¨¡å¼ + é€‚é…å™¨æ¨¡å¼</li>
<li><strong>ç‰¹æ€§</strong>ï¼š<ul>
<li>å…¨SSEæµå¼æ”¯æŒ</li>
<li>è·¨åŒºåŸŸæ•…éšœè½¬ç§»</li>
<li>è‡ªåŠ¨ä»¤ç‰Œåˆ·æ–°</li>
<li>SigV4è®¤è¯</li>
</ul>
</li>
</ul>
<h3 id="4-é¥æµ‹ä¸‰é‡æ ˆ"><a href="#4-é¥æµ‹ä¸‰é‡æ ˆ" class="headerlink" title="4. é¥æµ‹ä¸‰é‡æ ˆ"></a>4. é¥æµ‹ä¸‰é‡æ ˆ</h3><ul>
<li><strong>é”™è¯¯è¿½è¸ª</strong>ï¼šSentryï¼ˆANRæ£€æµ‹ã€é”™è¯¯è¾¹ç•Œã€æ€§èƒ½åˆ†æï¼‰</li>
<li><strong>æŒ‡æ ‡ç›‘æ§</strong>ï¼šOpenTelemetryï¼ˆè‡ªå®šä¹‰spanã€ä»¤ç‰Œè®¡æ•°å™¨ã€å»¶è¿Ÿç›´æ–¹å›¾ï¼‰</li>
<li><strong>åŠŸèƒ½æ ‡å¿—</strong>ï¼šStatsigï¼ˆA/Bæµ‹è¯•ã€æ¸è¿›å¼æ¨å‡ºã€åŠ¨æ€é…ç½®ï¼‰</li>
</ul>
<h2 id="æŠ€æœ¯äº®ç‚¹"><a href="#æŠ€æœ¯äº®ç‚¹" class="headerlink" title="æŠ€æœ¯äº®ç‚¹"></a>æŠ€æœ¯äº®ç‚¹</h2><h3 id="æ€§èƒ½ä¼˜åŒ–ç­–ç•¥"><a href="#æ€§èƒ½ä¼˜åŒ–ç­–ç•¥" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–ç­–ç•¥"></a>æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3><ol>
<li><p><strong>å†…å­˜ç®¡ç†</strong>ï¼š</p>
<ul>
<li>æµå¼æ–‡ä»¶è¯»å–</li>
<li>å›¾åƒå¤„ç†ä½¿ç”¨åŸç”Ÿlibvipsï¼ˆå †å¤–å†…å­˜ï¼‰</li>
<li>SAXé£æ ¼XMLè§£æï¼ˆå¸¸é‡å†…å­˜ï¼‰</li>
<li>é¢„ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼</li>
</ul>
</li>
<li><p><strong>å¯åŠ¨æ—¶é—´ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å»¶è¿ŸåŠ è½½ä¾èµ–é¡¹</li>
<li>ç¼“å­˜æœºåˆ¶</li>
<li>æŒ‰éœ€åˆå§‹åŒ–</li>
</ul>
</li>
</ol>
<h3 id="å®‰å…¨è€ƒè™‘"><a href="#å®‰å…¨è€ƒè™‘" class="headerlink" title="å®‰å…¨è€ƒè™‘"></a>å®‰å…¨è€ƒè™‘</h3><ol>
<li><strong>è¾“å…¥éªŒè¯å±‚</strong>ï¼šZod schemaéªŒè¯</li>
<li><strong>æ²™ç›’åŒ–ä¾èµ–</strong>ï¼šé¿å…ç›´æ¥ä½¿ç”¨child_processå’Œeval</li>
<li><strong>ç§˜å¯†ç®¡ç†</strong>ï¼šå¹³å°ç‰¹å®šçš„å¯†é’¥å­˜å‚¨ï¼ˆmacOSé’¥åŒ™ä¸²ã€ç¯å¢ƒå˜é‡ï¼‰</li>
</ol>
<h3 id="æ•°æ®å¤„ç†ç®¡é“"><a href="#æ•°æ®å¤„ç†ç®¡é“" class="headerlink" title="æ•°æ®å¤„ç†ç®¡é“"></a>æ•°æ®å¤„ç†ç®¡é“</h3><ul>
<li><strong>è¾“å…¥æº</strong>ï¼šç”¨æˆ·æ–‡æœ¬ã€Webå†…å®¹ã€å›¾åƒã€JSONæ•°æ®</li>
<li><strong>è½¬æ¢å±‚</strong>ï¼šZodéªŒè¯ã€Markdownè§£æã€HTMLâ†’MDè½¬æ¢ã€å›¾åƒå¤„ç†</li>
<li><strong>è¾“å‡º</strong>ï¼šç±»å‹å®‰å…¨æ•°æ®ã€Markdown ASTã€ä¼˜åŒ–å›¾åƒ</li>
</ul>
<h2 id="ä¸“ä¸šåŒ–ä¾èµ–é¡¹"><a href="#ä¸“ä¸šåŒ–ä¾èµ–é¡¹" class="headerlink" title="ä¸“ä¸šåŒ–ä¾èµ–é¡¹"></a>ä¸“ä¸šåŒ–ä¾èµ–é¡¹</h2><h3 id="éšè—çš„å®çŸ³"><a href="#éšè—çš„å®çŸ³" class="headerlink" title="éšè—çš„å®çŸ³"></a>éšè—çš„å®çŸ³</h3><ol>
<li><strong>fast-xml-parser</strong>ï¼šé’ˆå¯¹LLMé€šä¿¡å®šåˆ¶</li>
<li><strong>plistè§£æå™¨</strong>ï¼šmacOSç‰¹å®šä¼˜åŒ–</li>
<li><strong>cross-spawn</strong>ï¼šè·¨å¹³å°è¿›ç¨‹ç”Ÿæˆ</li>
</ol>
<h3 id="æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½"><a href="#æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½"></a>æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½</h3><ul>
<li><strong>æ¨¡å¼åŒ¹é…</strong>ï¼šglob + picomatch + minimatch</li>
<li><strong>è¿‡æ»¤ç®¡é“</strong>ï¼šå¿½ç•¥è§„åˆ™ + è‡ªå®šä¹‰è§„åˆ™</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šLRUç¼“å­˜æ¨¡å¼åŒ¹é…å™¨</li>
</ul>
<h2 id="æ¶æ„æ´å¯Ÿ"><a href="#æ¶æ„æ´å¯Ÿ" class="headerlink" title="æ¶æ„æ´å¯Ÿ"></a>æ¶æ„æ´å¯Ÿ</h2><h3 id="è®¾è®¡åŸåˆ™"><a href="#è®¾è®¡åŸåˆ™" class="headerlink" title="è®¾è®¡åŸåˆ™"></a>è®¾è®¡åŸåˆ™</h3><ol>
<li><strong>æ€§èƒ½ä¼˜å…ˆ</strong>ï¼šWebAssemblyå¸ƒå±€å¼•æ“ã€åŸç”Ÿå›¾åƒå¤„ç†</li>
<li><strong>è·¨å¹³å°å…¼å®¹</strong>ï¼šç»Ÿä¸€çš„æŠ½è±¡å±‚å¤„ç†å¹³å°å·®å¼‚</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šä¸‰é‡ç›‘æ§æ ˆç¡®ä¿ç”Ÿäº§ç¯å¢ƒç¨³å®šæ€§</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šå¤šå±‚éªŒè¯å’Œæ²™ç›’åŒ–æœºåˆ¶</li>
</ol>
<h3 id="å®ç°æ¨¡å¼"><a href="#å®ç°æ¨¡å¼" class="headerlink" title="å®ç°æ¨¡å¼"></a>å®ç°æ¨¡å¼</h3><ol>
<li><strong>å·¥å‚æ¨¡å¼</strong>ï¼šLLMå®¢æˆ·ç«¯åˆ›å»º</li>
<li><strong>é€‚é…å™¨æ¨¡å¼</strong>ï¼šå¤šæä¾›å•†APIç»Ÿä¸€</li>
<li><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼šä¸åŒå¹³å°çš„åŠŸèƒ½å®ç°</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šé¥æµ‹å’Œç›‘æ§</li>
</ol>
<h2 id="æŠ€æœ¯ä»·å€¼"><a href="#æŠ€æœ¯ä»·å€¼" class="headerlink" title="æŠ€æœ¯ä»·å€¼"></a>æŠ€æœ¯ä»·å€¼</h2><h3 id="åˆ›æ–°ç‚¹"><a href="#åˆ›æ–°ç‚¹" class="headerlink" title="åˆ›æ–°ç‚¹"></a>åˆ›æ–°ç‚¹</h3><ol>
<li><strong>ç»ˆç«¯Reactåº”ç”¨</strong>ï¼šå°†ç°ä»£WebæŠ€æœ¯å¼•å…¥CLIç¯å¢ƒ</li>
<li><strong>æµå¼è§£æ</strong>ï¼šå¤„ç†å¤æ‚çš„LLMå“åº”æ ¼å¼</li>
<li><strong>å¤šäº‘æŠ½è±¡</strong>ï¼šç»Ÿä¸€çš„LLMè®¿é—®æ¥å£</li>
<li><strong>ANRæ£€æµ‹</strong>ï¼šNode.jsç¯å¢ƒçš„åº”ç”¨æ— å“åº”æ£€æµ‹</li>
</ol>
<h3 id="å·¥ç¨‹å®è·µ"><a href="#å·¥ç¨‹å®è·µ" class="headerlink" title="å·¥ç¨‹å®è·µ"></a>å·¥ç¨‹å®è·µ</h3><ol>
<li><strong>ä¾èµ–é¡¹é€‰æ‹©</strong>ï¼šæ¯ä¸ªä¾èµ–éƒ½æœ‰æ˜ç¡®çš„æŠ€æœ¯ç›®çš„</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šç²¾å¿ƒè®¾è®¡çš„å†…å­˜ä½¿ç”¨ç­–ç•¥</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå…¨é¢çš„é”™è¯¯è¿½è¸ªå’ŒæŠ¥å‘Šæœºåˆ¶</li>
<li><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šè¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡å’Œåˆ†æ</li>
</ol>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>Claude Codeçš„æ¶æ„ä½“ç°äº†ç°ä»£è½¯ä»¶å·¥ç¨‹çš„æœ€ä½³å®è·µï¼Œé€šè¿‡ç²¾å¿ƒé€‰æ‹©çš„ä¾èµ–é¡¹å’Œåˆ›æ–°çš„è®¾è®¡æ¨¡å¼ï¼Œå®ç°äº†é«˜æ€§èƒ½ã€é«˜å¯é æ€§çš„CLIå·¥å…·ã€‚å…¶æ¶æ„ä¸ä»…è§£å†³äº†ä¼ ç»ŸCLIå·¥å…·çš„å±€é™æ€§ï¼Œè¿˜ä¸ºå¼€å‘è€…æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>è¿™ç§æ¶æ„è®¾è®¡çš„æˆåŠŸåœ¨äºï¼š</p>
<ul>
<li><strong>æŠ€æœ¯åˆ›æ–°</strong>ï¼šå°†Reactç”Ÿæ€å¼•å…¥ç»ˆç«¯ç¯å¢ƒ</li>
<li><strong>å·¥ç¨‹å“è¶Š</strong>ï¼šå…¨é¢çš„ç›‘æ§ã€å®‰å…¨å’Œæ€§èƒ½ä¼˜åŒ–</li>
<li><strong>å®ç”¨ä¸»ä¹‰</strong>ï¼šæ¯ä¸ªæŠ€æœ¯é€‰æ‹©éƒ½æœ‰æ˜ç¡®çš„ä¸šåŠ¡ä»·å€¼</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ¨¡å—åŒ–è®¾è®¡æ”¯æŒæœªæ¥åŠŸèƒ½æ‰©å±•</li>
</ul>
<p>æœ¬æ–‡æ¡£çš„åˆ†æä¸ºç†è§£ç°ä»£CLIå·¥å…·çš„è®¾è®¡å’Œå®ç°æä¾›äº†å®è´µçš„å‚è€ƒï¼Œç‰¹åˆ«æ˜¯å¯¹äºéœ€è¦åœ¨ç»ˆç«¯ç¯å¢ƒä¸­æä¾›å¤æ‚äº¤äº’åŠŸèƒ½çš„åº”ç”¨ç¨‹åºã€‚</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="å¤´åƒ"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="å¤´åƒ" alt="å¤´åƒ"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="å¤´åƒ" alt="å¤´åƒ"></a><div class="post-copyright__author_name">å¯’éœœ</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®" href="https://hanshuang-ai.github.io/2025/10/23/claude-code-ji-chu-jia-gou/">åŸåˆ›</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://hanshuang-ai.github.io/2025/10/23/claude-code-ji-chu-jia-gou/')">claude-codeåŸºç¡€æ¶æ„</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« "><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://hanshuang-ai.github.io/2025/10/23/claude-code-ji-chu-jia-gou/"></div><div class="reward-dec">ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=claude-codeåŸºç¡€æ¶æ„&amp;url=https://hanshuang-ai.github.io/2025/10/23/claude-code-ji-chu-jia-gou/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="å¤åˆ¶é“¾æ¥" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://hanshuang-ai.github.io" target="_blank">æˆ‘çš„åšå®¢</a>ï¼</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/10/22/canvas-hui-tu/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">canvasç»˜å›¾</div></div></a></div><div class="next-post pull-right"><a href="/2025/10/23/claude-code-shu-ju-jie-gou-yu-xiao-xi-jia-gou/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">claude-codeæ•°æ®ç»“æ„ä¸æ¶ˆæ¯æ¶æ„</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>æ–‡ç« ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Dependencies-The-Foundation-of-Claude-Code%E2%80%99s-Architecture"><span class="toc-number">1.</span> <span class="toc-text">Dependencies: The Foundation of Claude Codeâ€™s Architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%EF%BC%9AClaude-Code%E6%9E%B6%E6%9E%84%E7%9A%84%E5%9F%BA%E7%A1%80"><span class="toc-number">1.1.</span> <span class="toc-text">ä¾èµ–ï¼šClaude Codeæ¶æ„çš„åŸºç¡€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Unconventional-Choices-That-Define-Performance"><span class="toc-number">1.2.</span> <span class="toc-text">The Unconventional Choices That Define Performance</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E6%80%A7%E8%83%BD%E7%9A%84%E9%9D%9E%E4%BC%A0%E7%BB%9F%E9%80%89%E6%8B%A9"><span class="toc-number">1.3.</span> <span class="toc-text">å®šä¹‰æ€§èƒ½çš„éä¼ ç»Ÿé€‰æ‹©</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-The-React-in-Terminal-Architecture"><span class="toc-number">1.3.1.</span> <span class="toc-text">ğŸ” The React-in-Terminal Architecture</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-%E7%BB%88%E7%AB%AF%E4%B8%AD%E7%9A%84React%E6%9E%B6%E6%9E%84"><span class="toc-number">1.3.2.</span> <span class="toc-text">ğŸ” ç»ˆç«¯ä¸­çš„Reactæ¶æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-The-Streaming-Parser-Architecture"><span class="toc-number">1.3.3.</span> <span class="toc-text">ğŸ” The Streaming Parser Architecture</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-%E6%B5%81%E5%BC%8F%E8%A7%A3%E6%9E%90%E5%99%A8%E6%9E%B6%E6%9E%84"><span class="toc-number">1.3.4.</span> <span class="toc-text">ğŸ” æµå¼è§£æå™¨æ¶æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-The-Multi-Platform-LLM-Abstraction-Layer"><span class="toc-number">1.3.5.</span> <span class="toc-text">ğŸ” The Multi-Platform LLM Abstraction Layer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-%E5%A4%9A%E5%B9%B3%E5%8F%B0LLM%E6%8A%BD%E8%B1%A1%E5%B1%82"><span class="toc-number">1.3.6.</span> <span class="toc-text">ğŸ” å¤šå¹³å°LLMæŠ½è±¡å±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-The-Telemetry-Triple-Stack"><span class="toc-number">1.3.7.</span> <span class="toc-text">ğŸ” The Telemetry Triple-Stack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-%E9%81%A5%E6%B5%8B%E4%B8%89%E9%87%8D%E6%A0%88"><span class="toc-number">1.3.8.</span> <span class="toc-text">ğŸ” é¥æµ‹ä¸‰é‡æ ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-Data-Transformation-Pipeline"><span class="toc-number">1.3.9.</span> <span class="toc-text">ğŸ” Data Transformation Pipeline</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2%E7%AE%A1%E9%81%93"><span class="toc-number">1.3.10.</span> <span class="toc-text">ğŸ” æ•°æ®è½¬æ¢ç®¡é“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-The-MCP-Transport-Layer"><span class="toc-number">1.3.11.</span> <span class="toc-text">ğŸ” The MCP Transport Layer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%8D-MCP%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">1.3.12.</span> <span class="toc-text">ğŸ” MCPä¼ è¾“å±‚</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dependency-Categories-Deep-Dive"><span class="toc-number">1.4.</span> <span class="toc-text">Dependency Categories Deep Dive</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E7%B1%BB%E5%88%AB%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90"><span class="toc-number">1.5.</span> <span class="toc-text">ä¾èµ–ç±»åˆ«æ·±åº¦å‰–æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Core-CLI-Framework-15-packages"><span class="toc-number">1.5.1.</span> <span class="toc-text">Core CLI Framework (15+ packages)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83CLI%E6%A1%86%E6%9E%B6%EF%BC%8815-%E4%B8%AA%E5%8C%85%EF%BC%89"><span class="toc-number">1.5.2.</span> <span class="toc-text">æ ¸å¿ƒCLIæ¡†æ¶ï¼ˆ15+ä¸ªåŒ…ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LLM-Integration-Stack-5-packages"><span class="toc-number">1.5.3.</span> <span class="toc-text">LLM Integration Stack (5+ packages)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LLM%E9%9B%86%E6%88%90%E5%A0%86%E6%A0%88%EF%BC%885-%E4%B8%AA%E5%8C%85%EF%BC%89"><span class="toc-number">1.5.4.</span> <span class="toc-text">LLMé›†æˆå †æ ˆï¼ˆ5+ä¸ªåŒ…ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Data-Processing-amp-Validation-8-packages"><span class="toc-number">1.5.5.</span> <span class="toc-text">Data Processing &amp; Validation (8+ packages)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B8%8E%E9%AA%8C%E8%AF%81%EF%BC%888-%E4%B8%AA%E5%8C%85%EF%BC%89"><span class="toc-number">1.5.6.</span> <span class="toc-text">æ•°æ®å¤„ç†ä¸éªŒè¯ï¼ˆ8+ä¸ªåŒ…ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#File-System-Intelligence-6-packages"><span class="toc-number">1.5.7.</span> <span class="toc-text">File System Intelligence (6+ packages)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%99%BA%E8%83%BD%EF%BC%886-%E4%B8%AA%E5%8C%85%EF%BC%89"><span class="toc-number">1.5.8.</span> <span class="toc-text">æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½ï¼ˆ6+ä¸ªåŒ…ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Telemetry-amp-Observability-4-packages"><span class="toc-number">1.5.9.</span> <span class="toc-text">Telemetry &amp; Observability (4+ packages)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%A5%E6%B5%8B%E4%B8%8E%E5%8F%AF%E8%A7%82%E5%AF%9F%E6%80%A7%EF%BC%884-%E4%B8%AA%E5%8C%85%EF%BC%89"><span class="toc-number">1.5.10.</span> <span class="toc-text">é¥æµ‹ä¸å¯è§‚å¯Ÿæ€§ï¼ˆ4+ä¸ªåŒ…ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hidden-Gems-The-Specialized-Dependencies"><span class="toc-number">1.6.</span> <span class="toc-text">Hidden Gems: The Specialized Dependencies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%90%E8%97%8F%E7%9A%84%E5%AE%9D%E7%9F%B3%EF%BC%9A%E4%B8%93%E4%B8%9A%E5%8C%96%E4%BE%9D%E8%B5%96%E9%A1%B9"><span class="toc-number">1.7.</span> <span class="toc-text">éšè—çš„å®çŸ³ï¼šä¸“ä¸šåŒ–ä¾èµ–é¡¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#XML-Parsing-for-LLM-Communication"><span class="toc-number">1.7.1.</span> <span class="toc-text">XML Parsing for LLM Communication</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E4%BA%8ELLM%E9%80%9A%E4%BF%A1%E7%9A%84XML%E8%A7%A3%E6%9E%90"><span class="toc-number">1.7.2.</span> <span class="toc-text">ç”¨äºLLMé€šä¿¡çš„XMLè§£æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-plist-Parser-Mystery"><span class="toc-number">1.7.3.</span> <span class="toc-text">The plist Parser Mystery</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#plist%E8%A7%A3%E6%9E%90%E5%99%A8%E4%B9%8B%E8%B0%9C"><span class="toc-number">1.7.4.</span> <span class="toc-text">plistè§£æå™¨ä¹‹è°œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cross-Platform-Process-Spawning"><span class="toc-number">1.7.5.</span> <span class="toc-text">Cross-Platform Process Spawning</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%B9%B3%E5%8F%B0%E8%BF%9B%E7%A8%8B%E7%94%9F%E6%88%90"><span class="toc-number">1.7.6.</span> <span class="toc-text">è·¨å¹³å°è¿›ç¨‹ç”Ÿæˆ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dependency-Security-Considerations"><span class="toc-number">1.8.</span> <span class="toc-text">Dependency Security Considerations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E9%A1%B9%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91"><span class="toc-number">1.9.</span> <span class="toc-text">ä¾èµ–é¡¹å®‰å…¨è€ƒè™‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Performance-Implications-of-Dependency-Choices"><span class="toc-number">1.10.</span> <span class="toc-text">Performance Implications of Dependency Choices</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E9%A1%B9%E9%80%89%E6%8B%A9%E7%9A%84%E6%80%A7%E8%83%BD%E5%BD%B1%E5%93%8D"><span class="toc-number">1.11.</span> <span class="toc-text">ä¾èµ–é¡¹é€‰æ‹©çš„æ€§èƒ½å½±å“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Memory-Management-Strategy"><span class="toc-number">1.11.1.</span> <span class="toc-text">Memory Management Strategy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5"><span class="toc-number">1.11.2.</span> <span class="toc-text">å†…å­˜ç®¡ç†ç­–ç•¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Startup-Time-Optimization"><span class="toc-number">1.11.3.</span> <span class="toc-text">Startup Time Optimization</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%97%B6%E9%97%B4%E4%BC%98%E5%8C%96"><span class="toc-number">1.11.4.</span> <span class="toc-text">å¯åŠ¨æ—¶é—´ä¼˜åŒ–</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%80%BB%E7%BB%93"><span class="toc-number">2.</span> <span class="toc-text">æ–‡ä»¶æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">2.1.</span> <span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%9E%B6%E6%9E%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.2.</span> <span class="toc-text">æ ¸å¿ƒæ¶æ„ç‰¹ç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%88%E7%AB%AFReact%E6%9E%B6%E6%9E%84"><span class="toc-number">2.2.1.</span> <span class="toc-text">1. ç»ˆç«¯Reactæ¶æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B5%81%E5%BC%8F%E8%A7%A3%E6%9E%90%E5%99%A8%E6%9E%B6%E6%9E%84"><span class="toc-number">2.2.2.</span> <span class="toc-text">2. æµå¼è§£æå™¨æ¶æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%A4%9A%E5%B9%B3%E5%8F%B0LLM%E6%8A%BD%E8%B1%A1%E5%B1%82"><span class="toc-number">2.2.3.</span> <span class="toc-text">3. å¤šå¹³å°LLMæŠ½è±¡å±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%81%A5%E6%B5%8B%E4%B8%89%E9%87%8D%E6%A0%88"><span class="toc-number">2.2.4.</span> <span class="toc-text">4. é¥æµ‹ä¸‰é‡æ ˆ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E4%BA%AE%E7%82%B9"><span class="toc-number">2.3.</span> <span class="toc-text">æŠ€æœ¯äº®ç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E7%AD%96%E7%95%A5"><span class="toc-number">2.3.1.</span> <span class="toc-text">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91"><span class="toc-number">2.3.2.</span> <span class="toc-text">å®‰å…¨è€ƒè™‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E7%AE%A1%E9%81%93"><span class="toc-number">2.3.3.</span> <span class="toc-text">æ•°æ®å¤„ç†ç®¡é“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%93%E4%B8%9A%E5%8C%96%E4%BE%9D%E8%B5%96%E9%A1%B9"><span class="toc-number">2.4.</span> <span class="toc-text">ä¸“ä¸šåŒ–ä¾èµ–é¡¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E8%97%8F%E7%9A%84%E5%AE%9D%E7%9F%B3"><span class="toc-number">2.4.1.</span> <span class="toc-text">éšè—çš„å®çŸ³</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%99%BA%E8%83%BD"><span class="toc-number">2.4.2.</span> <span class="toc-text">æ–‡ä»¶ç³»ç»Ÿæ™ºèƒ½</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84%E6%B4%9E%E5%AF%9F"><span class="toc-number">2.5.</span> <span class="toc-text">æ¶æ„æ´å¯Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="toc-number">2.5.1.</span> <span class="toc-text">è®¾è®¡åŸåˆ™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.2.</span> <span class="toc-text">å®ç°æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E4%BB%B7%E5%80%BC"><span class="toc-number">2.6.</span> <span class="toc-text">æŠ€æœ¯ä»·å€¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E6%96%B0%E7%82%B9"><span class="toc-number">2.6.1.</span> <span class="toc-text">åˆ›æ–°ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5"><span class="toc-number">2.6.2.</span> <span class="toc-text">å·¥ç¨‹å®è·µ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-number">2.7.</span> <span class="toc-text">ç»“è®º</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>æœ€è¿‘å‘å¸ƒ</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/25/macos-an-zhuang-homebrew/" title="macOSå®‰è£…homebrew">macOSå®‰è£…homebrew</a><time datetime="2025-12-25T12:09:27.713Z" title="æ›´æ–°äº 2025-12-25 20:09:27">2025-12-25</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2025/01/16/go-yu-yan-ru-men-zhi-nan/" title="Goè¯­è¨€å…¥é—¨æŒ‡å—">Goè¯­è¨€å…¥é—¨æŒ‡å—</a><time datetime="2025-12-16T12:44:28.982Z" title="æ›´æ–°äº 2025-12-16 20:44:28">2025-12-16</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2025/12/16/php-shu-zu-wan-quan-zhi-nan/" title="PHPæ•°ç»„å®Œå…¨æŒ‡å—">PHPæ•°ç»„å®Œå…¨æŒ‡å—</a><time datetime="2025-12-16T11:12:19.007Z" title="æ›´æ–°äº 2025-12-16 19:12:19">2025-12-16</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2024/12/16/claude-code-agent-sdk-jie-ru-zi-yan-cha-jian/" title="Claude Code Agent SDK æ¥å…¥è‡ªç ”æ’ä»¶">Claude Code Agent SDK æ¥å…¥è‡ªç ”æ’ä»¶</a><time datetime="2025-12-16T10:15:32.430Z" title="æ›´æ–°äº 2025-12-16 18:15:32">2025-12-16</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2025/11/20/react-ji-chu/" title="Reactæ ¸å¿ƒåŸºç¡€ä¸å®è·µæŒ‡å—">Reactæ ¸å¿ƒåŸºç¡€ä¸å®è·µæŒ‡å—</a><time datetime="2025-11-20T05:34:53.956Z" title="æ›´æ–°äº 2025-11-20 13:34:53">2025-11-20</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By å¯’éœœ</div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">æ–‡ç« </div><div class="length-num">167</div></a><a href="/tags/" title="tag"><div class="headline">æ ‡ç­¾</div><div class="length-num">121</div></a><a href="/categories/" title="category"><div class="headline">åˆ†ç±»</div><div class="length-num">30</div></a></div><span class="sidebar-menu-item-title">åŠŸèƒ½</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="æ˜¾ç¤ºæ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>æ˜¾ç¤ºæ¨¡å¼</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">ç½‘é¡µ</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://hexo.anheyu.com/" title="åšå®¢"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="åšå®¢"/><span class="back-menu-item-text">åšå®¢</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">é¡¹ç›®</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="å®‰çŸ¥é±¼å›¾åºŠ"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="å®‰çŸ¥é±¼å›¾åºŠ"/><span class="back-menu-item-text">å®‰çŸ¥é±¼å›¾åºŠ</span></a></div></div></div><span class="sidebar-menu-item-title">æ ‡ç­¾</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size: 0.88rem;">AI<sup>1</sup></a><a href="/tags/Claude/" style="font-size: 0.88rem;">Claude<sup>1</sup></a><a href="/tags/Go/" style="font-size: 0.88rem;">Go<sup>1</sup></a><a href="/tags/Golang/" style="font-size: 0.88rem;">Golang<sup>1</sup></a><a href="/tags/HTML%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">HTMLåŸºç¡€<sup>1</sup></a><a href="/tags/SDK/" style="font-size: 0.88rem;">SDK<sup>1</sup></a><a href="/tags/base64/" style="font-size: 0.88rem;">base64<sup>1</sup></a><a href="/tags/canvas/" style="font-size: 0.88rem;">canvas<sup>2</sup></a><a href="/tags/cesium/" style="font-size: 0.88rem;">cesium<sup>1</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>5</sup></a><a href="/tags/docker/" style="font-size: 0.88rem;">docker<sup>3</sup></a><a href="/tags/echart/" style="font-size: 0.88rem;">echart<sup>1</sup></a><a href="/tags/electron/" style="font-size: 0.88rem;">electron<sup>2</sup></a><a href="/tags/elementUI/" style="font-size: 0.88rem;">elementUI<sup>1</sup></a><a href="/tags/flex/" style="font-size: 0.88rem;">flex<sup>1</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>3</sup></a><a href="/tags/javascript/" style="font-size: 0.88rem;">javascript<sup>1</sup></a><a href="/tags/js/" style="font-size: 0.88rem;">js<sup>2</sup></a><a href="/tags/position/" style="font-size: 0.88rem;">position<sup>1</sup></a><a href="/tags/vue/" style="font-size: 0.88rem;">vue<sup>17</sup></a><a href="/tags/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/" style="font-size: 0.88rem;">äº‹ä»¶å¾ªç¯<sup>1</sup></a><a href="/tags/%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC/" style="font-size: 0.88rem;">äº‹ä»¶ç›‘å¬<sup>1</sup></a><a href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 0.88rem;">å¯è§†åŒ–<sup>3</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 0.88rem;">åç«¯<sup>1</sup></a><a href="/tags/%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/" style="font-size: 0.88rem;">åŸºæœ¬å‘½ä»¤<sup>2</sup></a><a href="/tags/%E5%AD%98%E5%82%A8/" style="font-size: 0.88rem;">å­˜å‚¨<sup>1</sup></a><a href="/tags/%E5%AE%9E%E6%88%98/" style="font-size: 0.88rem;">å®æˆ˜<sup>31</sup></a><a href="/tags/%E5%B8%83%E5%B1%80/" style="font-size: 0.88rem;">å¸ƒå±€<sup>1</sup></a><a href="/tags/%E6%89%93%E5%8D%B0/" style="font-size: 0.88rem;">æ‰“å°<sup>1</sup></a><a href="/tags/%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/" style="font-size: 0.88rem;">æ’ä»¶å¼€å‘<sup>1</sup></a><a href="/tags/%E6%A8%AA%E7%AB%96%E5%B1%8F%E6%A3%80%E6%B5%8B/" style="font-size: 0.88rem;">æ¨ªç«–å±æ£€æµ‹<sup>1</sup></a><a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size: 0.88rem;">æ­£åˆ™<sup>4</sup></a><a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 0.88rem;">æµè§ˆå™¨<sup>5</sup></a><a href="/tags/%E7%9B%92%E6%A8%A1%E5%9E%8B/" style="font-size: 0.88rem;">ç›’æ¨¡å‹<sup>1</sup></a><a href="/tags/%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/" style="font-size: 0.88rem;">ç»„ä»¶é€šä¿¡<sup>2</sup></a><a href="/tags/%E7%BC%93%E5%AD%98/" style="font-size: 0.88rem;">ç¼“å­˜<sup>1</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">ç¼–ç¨‹è¯­è¨€<sup>1</sup></a><a href="/tags/%E8%B7%AF%E7%94%B1/" style="font-size: 0.88rem;">è·¯ç”±<sup>1</sup></a><a href="/tags/%E8%BF%87%E6%BB%A4%E5%99%A8/" style="font-size: 0.88rem;">è¿‡æ»¤å™¨<sup>3</sup></a><a href="/tags/%E9%9F%B3%E9%A2%91/" style="font-size: 0.88rem;">éŸ³é¢‘<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">æ’­æ”¾éŸ³ä¹</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>ç²˜è´´æ–‡æœ¬</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>å¼•ç”¨åˆ°è¯„è®º</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç«™å†…æœç´¢</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç™¾åº¦æœç´¢</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>æ’­æ”¾éŸ³ä¹</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>åˆ‡æ¢åˆ°ä¸Šä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶æ­Œå</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>åšå®¢åˆ†ç±»</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>æ–‡ç« æ ‡ç­¾</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶åœ°å€</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">å…³é—­çƒ­è¯„</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">æ·±è‰²æ¨¡å¼</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>è½‰ç‚ºç¹é«”</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@6.1.6/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// æ¶ˆé™¤æ§åˆ¶å°æ‰“å°
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //åœ¨æ¢å¤å‰è¾“å‡ºæ—¥å¿—
  const grt = new Date("04/01/2021 00:00:00"); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `æ¬¢è¿ä½¿ç”¨å®‰çŸ¥é±¼!`,
    `ç”Ÿæ´»æ˜æœ—, ä¸‡ç‰©å¯çˆ±`,
    `
        
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
      â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•   â•šâ•â•    â•šâ•â•â•â•â•â•
        
        `,
    "å·²ä¸Šçº¿",
    dnum,
    "å¤©",
    "Â©2020 By å®‰çŸ¥é±¼ V1.7.1",
  ];
  const ascll2 = [`NCC2-036`, `è°ƒç”¨å‰ç½®æ‘„åƒå¤´æ‹ç…§æˆåŠŸï¼Œè¯†åˆ«ä¸ºã€å°ç¬¨è›‹ã€‘.`, `Photo captured: `, `ğŸ¤ª`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c ä½ å¥½ï¼Œå°ç¬¨è›‹.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c âš¡ Powered by å®‰çŸ¥é±¼ %c ä½ æ­£åœ¨è®¿é—® å¯’éœœ çš„åšå®¢.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c ä½ å·²æ‰“å¼€æ§åˆ¶å°.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c ä½ ç°åœ¨æ­£å¤„äºç›‘æ§ä¸­.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdn.cbd.int/qrcodejs@1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">é€šçŸ¥</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">ä½ å¥½å‘€</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>